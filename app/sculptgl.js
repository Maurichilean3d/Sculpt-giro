/*! For license information please see sculptgl.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sculptgl=e():t.sculptgl=e()}(self,(function(){return(()=>{var t={750:(t,e,r)=>{"use strict";r.r(e),r(50);var i=r(297),n={radiusFactor:.75,intensityFactor:0,pressure:.5,getPressureIntensity:function(){return 1+n.intensityFactor*(2*n.pressure-1)},getPressureRadius:function(){return 1+n.radiusFactor*(2*n.pressure-1)}};const s=n;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=d();return function(){var r,i=g(t);if(e){var n=g(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return p(this,r)}}function p(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function b(t,e,r){return e&&k(t.prototype,e),r&&k(t,r),t}var x=1001,M=2300,w=2301,A=2302,T="srgb",S="srgb-linear",E="linear",C="srgb",R=35044,I=35048,z=2e3,O=2001;function N(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var F={};function V(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,n="THREE."+e.shift();(i=console).warn.apply(i,[n].concat(e))}function P(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,n="THREE."+e.shift();(i=console).error.apply(i,[n].concat(e))}function D(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=e.join(" ");i in F||(F[i]=!0,V.apply(void 0,e))}var U=function(){function t(){_(this,t)}return b(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)}},{key:"hasEventListener",value:function(t,e){var r=this._listeners;return void 0!==r&&void 0!==r[t]&&-1!==r[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){var r=this._listeners;if(void 0!==r){var i=r[t];if(void 0!==i){var n=i.indexOf(e);-1!==n&&i.splice(n,1)}}}},{key:"dispatchEvent",value:function(t){var e=this._listeners;if(void 0!==e){var r=e[t.type];if(void 0!==r){t.target=this;for(var i=r.slice(0),n=0,s=i.length;n<s;n++)i[n].call(this,t);t.target=null}}}}]),t}(),L=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function B(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(L[255&t]+L[t>>8&255]+L[t>>16&255]+L[t>>24&255]+"-"+L[255&e]+L[e>>8&255]+"-"+L[e>>16&15|64]+L[e>>24&255]+"-"+L[63&r|128]+L[r>>8&255]+"-"+L[r>>16&255]+L[r>>24&255]+L[255&i]+L[i>>8&255]+L[i>>16&255]+L[i>>24&255]).toLowerCase()}function j(t,e,r){return Math.max(e,Math.min(r,t))}function W(t,e){return(t%e+e)%e}function X(t,e,r){return(1-r)*t+r*e}function Y(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function q(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}Math.PI,Math.PI;var H=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_(this,t),t.prototype.isVector2=!0,this.x=e,this.y=r}return b(t,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,r=this.y,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6],this.y=i[1]*e+i[4]*r+i[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=j(this.x,t.x,e.x),this.y=j(this.y,t.y,e.y),this}},{key:"clampScalar",value:function(t,e){return this.x=j(this.x,t,e),this.y=j(this.y,t,e),this}},{key:"clampLength",value:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(j(r,t,e))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var r=this.dot(t)/e;return Math.acos(j(r,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var r=Math.cos(e),i=Math.sin(e),n=this.x-t.x,s=this.y-t.y;return this.x=n*r-s*i+t.x,this.y=n*i+s*r+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:case"end":return t.stop()}}),t,this)}))}]),t}(),G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_(this,t),this.isQuaternion=!0,this._x=e,this._y=r,this._z=i,this._w=n}return b(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,r,i){return this._x=t,this._y=e,this._z=r,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t._x,i=t._y,n=t._z,s=t._order,a=Math.cos,o=Math.sin,u=a(r/2),h=a(i/2),l=a(n/2),c=o(r/2),f=o(i/2),y=o(n/2);switch(s){case"XYZ":this._x=c*h*l+u*f*y,this._y=u*f*l-c*h*y,this._z=u*h*y+c*f*l,this._w=u*h*l-c*f*y;break;case"YXZ":this._x=c*h*l+u*f*y,this._y=u*f*l-c*h*y,this._z=u*h*y-c*f*l,this._w=u*h*l+c*f*y;break;case"ZXY":this._x=c*h*l-u*f*y,this._y=u*f*l+c*h*y,this._z=u*h*y+c*f*l,this._w=u*h*l-c*f*y;break;case"ZYX":this._x=c*h*l-u*f*y,this._y=u*f*l+c*h*y,this._z=u*h*y-c*f*l,this._w=u*h*l+c*f*y;break;case"YZX":this._x=c*h*l+u*f*y,this._y=u*f*l+c*h*y,this._z=u*h*y-c*f*l,this._w=u*h*l-c*f*y;break;case"XZY":this._x=c*h*l-u*f*y,this._y=u*f*l-c*h*y,this._z=u*h*y+c*f*l,this._w=u*h*l+c*f*y;break;default:V("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var r=e/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,r=e[0],i=e[4],n=e[8],s=e[1],a=e[5],o=e[9],u=e[2],h=e[6],l=e[10],c=r+a+l;if(c>0){var f=.5/Math.sqrt(c+1);this._w=.25/f,this._x=(h-o)*f,this._y=(n-u)*f,this._z=(s-i)*f}else if(r>a&&r>l){var y=2*Math.sqrt(1+r-a-l);this._w=(h-o)/y,this._x=.25*y,this._y=(i+s)/y,this._z=(n+u)/y}else if(a>l){var p=2*Math.sqrt(1+a-r-l);this._w=(n-u)/p,this._x=(i+s)/p,this._y=.25*p,this._z=(o+h)/p}else{var v=2*Math.sqrt(1+l-r-a);this._w=(s-i)/v,this._x=(n+u)/v,this._y=(o+h)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var r=t.dot(e)+1;return r<1e-8?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=r),this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(j(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var r=this.angleTo(t);if(0===r)return this;var i=Math.min(1,e/r);return this.slerp(t,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t){return this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var r=t._x,i=t._y,n=t._z,s=t._w,a=e._x,o=e._y,u=e._z,h=e._w;return this._x=r*h+s*a+i*u-n*o,this._y=i*h+s*o+n*a-r*u,this._z=n*h+s*u+r*o-i*a,this._w=s*h-r*a-i*o-n*u,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(e<=0)return this;if(e>=1)return this.copy(t);var r=t._x,i=t._y,n=t._z,s=t._w,a=this.dot(t);a<0&&(r=-r,i=-i,n=-n,s=-s,a=-a);var o=1-e;if(a<.9995){var u=Math.acos(a),h=Math.sin(u);o=Math.sin(o*u)/h,e=Math.sin(e*u)/h,this._x=this._x*o+r*e,this._y=this._y*o+i*e,this._z=this._z*o+n*e,this._w=this._w*o+s*e,this._onChangeCallback()}else this._x=this._x*o+r*e,this._y=this._y*o+i*e,this._z=this._z*o+n*e,this._w=this._w*o+s*e,this.normalize();return this}},{key:"slerpQuaternions",value:function(t,e,r){return this.copy(t).slerp(e,r)}},{key:"random",value:function(){var t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),n=Math.sqrt(r);return this.set(i*Math.sin(t),i*Math.cos(t),n*Math.sin(e),n*Math.cos(e))}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._x;case 2:return t.next=4,this._y;case 4:return t.next=6,this._z;case 6:return t.next=8,this._w;case 8:case"end":return t.stop()}}),t,this)}))}],[{key:"slerpFlat",value:function(t,e,r,i,n,s,a){var o=r[i+0],u=r[i+1],h=r[i+2],l=r[i+3],c=n[s+0],f=n[s+1],y=n[s+2],p=n[s+3];if(a<=0)return t[e+0]=o,t[e+1]=u,t[e+2]=h,void(t[e+3]=l);if(a>=1)return t[e+0]=c,t[e+1]=f,t[e+2]=y,void(t[e+3]=p);if(l!==p||o!==c||u!==f||h!==y){var v=o*c+u*f+h*y+l*p;v<0&&(c=-c,f=-f,y=-y,p=-p,v=-v);var d=1-a;if(v<.9995){var g=Math.acos(v),m=Math.sin(g);o=o*(d=Math.sin(d*g)/m)+c*(a=Math.sin(a*g)/m),u=u*d+f*a,h=h*d+y*a,l=l*d+p*a}else{o=o*d+c*a,u=u*d+f*a,h=h*d+y*a,l=l*d+p*a;var _=1/Math.sqrt(o*o+u*u+h*h+l*l);o*=_,u*=_,h*=_,l*=_}}t[e]=o,t[e+1]=u,t[e+2]=h,t[e+3]=l}},{key:"multiplyQuaternionsFlat",value:function(t,e,r,i,n,s){var a=r[i],o=r[i+1],u=r[i+2],h=r[i+3],l=n[s],c=n[s+1],f=n[s+2],y=n[s+3];return t[e]=a*y+h*l+o*f-u*c,t[e+1]=o*y+h*c+u*l-a*f,t[e+2]=u*y+h*f+a*c-o*l,t[e+3]=h*y-a*l-o*c-u*f,t}}]),t}(),Z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_(this,t),t.prototype.isVector3=!0,this.x=e,this.y=r,this.z=i}return b(t,[{key:"set",value:function(t,e,r){return void 0===r&&(r=this.z),this.x=t,this.y=e,this.z=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return this.applyQuaternion(Q.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(Q.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,r=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[3]*r+n[6]*i,this.y=n[1]*e+n[4]*r+n[7]*i,this.z=n[2]*e+n[5]*r+n[8]*i,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,r=this.y,i=this.z,n=t.elements,s=1/(n[3]*e+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*e+n[4]*r+n[8]*i+n[12])*s,this.y=(n[1]*e+n[5]*r+n[9]*i+n[13])*s,this.z=(n[2]*e+n[6]*r+n[10]*i+n[14])*s,this}},{key:"applyQuaternion",value:function(t){var e=this.x,r=this.y,i=this.z,n=t.x,s=t.y,a=t.z,o=t.w,u=2*(s*i-a*r),h=2*(a*e-n*i),l=2*(n*r-s*e);return this.x=e+o*u+s*l-a*h,this.y=r+o*h+a*u-n*l,this.z=i+o*l+n*h-s*u,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,r=this.y,i=this.z,n=t.elements;return this.x=n[0]*e+n[4]*r+n[8]*i,this.y=n[1]*e+n[5]*r+n[9]*i,this.z=n[2]*e+n[6]*r+n[10]*i,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=j(this.x,t.x,e.x),this.y=j(this.y,t.y,e.y),this.z=j(this.z,t.z,e.z),this}},{key:"clampScalar",value:function(t,e){return this.x=j(this.x,t,e),this.y=j(this.y,t,e),this.z=j(this.z,t,e),this}},{key:"clampLength",value:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(j(r,t,e))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this.z=t.z+(e.z-t.z)*r,this}},{key:"cross",value:function(t){return this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var r=t.x,i=t.y,n=t.z,s=e.x,a=e.y,o=e.z;return this.x=i*o-n*a,this.y=n*s-r*o,this.z=r*a-i*s,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var r=t.dot(this)/e;return this.copy(t).multiplyScalar(r)}},{key:"projectOnPlane",value:function(t){return J.copy(this).projectOnVector(t),this.sub(J)}},{key:"reflect",value:function(t){return this.sub(J.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var r=this.dot(t)/e;return Math.acos(j(r,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return e*e+r*r+i*i}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,r){var i=Math.sin(e)*t;return this.x=i*Math.sin(r),this.y=Math.cos(e)*t,this.z=i*Math.cos(r),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=i,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"setFromEuler",value:function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}},{key:"setFromColor",value:function(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var t=Math.random()*Math.PI*2,e=2*Math.random()-1,r=Math.sqrt(1-e*e);return this.x=r*Math.cos(t),this.y=e,this.z=r*Math.sin(t),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}}),t,this)}))}]),t}(),J=new Z,Q=new G,K=function(){function t(e,r,i,n,s,a,o,u,h){_(this,t),t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,r,i,n,s,a,o,u,h)}return b(t,[{key:"set",value:function(t,e,r,i,n,s,a,o,u){var h=this.elements;return h[0]=t,h[1]=i,h[2]=a,h[3]=e,h[4]=n,h[5]=o,h[6]=r,h[7]=s,h[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}},{key:"extractBasis",value:function(t,e,r){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var r=t.elements,i=e.elements,n=this.elements,s=r[0],a=r[3],o=r[6],u=r[1],h=r[4],l=r[7],c=r[2],f=r[5],y=r[8],p=i[0],v=i[3],d=i[6],g=i[1],m=i[4],_=i[7],k=i[2],b=i[5],x=i[8];return n[0]=s*p+a*g+o*k,n[3]=s*v+a*m+o*b,n[6]=s*d+a*_+o*x,n[1]=u*p+h*g+l*k,n[4]=u*v+h*m+l*b,n[7]=u*d+h*_+l*x,n[2]=c*p+f*g+y*k,n[5]=c*v+f*m+y*b,n[8]=c*d+f*_+y*x,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],u=t[7],h=t[8];return e*s*h-e*a*u-r*n*h+r*a*o+i*n*u-i*s*o}},{key:"invert",value:function(){var t=this.elements,e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],u=t[7],h=t[8],l=h*s-a*u,c=a*o-h*n,f=u*n-s*o,y=e*l+r*c+i*f;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);var p=1/y;return t[0]=l*p,t[1]=(i*u-h*r)*p,t[2]=(a*r-i*s)*p,t[3]=c*p,t[4]=(h*e-i*o)*p,t[5]=(i*n-a*e)*p,t[6]=f*p,t[7]=(r*o-u*e)*p,t[8]=(s*e-r*n)*p,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,r,i,n,s,a){var o=Math.cos(n),u=Math.sin(n);return this.set(r*o,r*u,-r*(o*s+u*a)+s+t,-i*u,i*o,-i*(-u*s+o*a)+a+e,0,0,1),this}},{key:"scale",value:function(t,e){return this.premultiply($.makeScale(t,e)),this}},{key:"rotate",value:function(t){return this.premultiply($.makeRotation(-t)),this}},{key:"translate",value:function(t,e){return this.premultiply($.makeTranslation(t,e)),this}},{key:"makeTranslation",value:function(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}},{key:"makeRotation",value:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,r,e,0,0,0,1),this}},{key:"makeScale",value:function(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}},{key:"equals",value:function(t){for(var e=this.elements,r=t.elements,i=0;i<9;i++)if(e[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<9;r++)this.elements[r]=t[r+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}(),$=new K,tt=(new K).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),et=(new K).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function rt(){var t,e={enabled:!0,workingColorSpace:S,spaces:{},convert:function(t,e,r){return!1!==this.enabled&&e!==r&&e&&r?(this.spaces[e].transfer===C&&(t.r=st(t.r),t.g=st(t.g),t.b=st(t.b)),this.spaces[e].primaries!==this.spaces[r].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[r].fromXYZ)),this.spaces[r].transfer===C&&(t.r=at(t.r),t.g=at(t.g),t.b=at(t.b)),t):t},workingToColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},colorSpaceToWorking:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return""===t?E:this.spaces[t].transfer},getToneMappingMode:function(t){return this.spaces[t].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,r){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[r].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[t].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,r){return D("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,r)},toWorkingColorSpace:function(t,r){return D("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,r)}},r=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],n=[.3127,.329];return e.define((m(t={},S,{primaries:r,whitePoint:n,transfer:E,toXYZ:tt,fromXYZ:et,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:T},outputColorSpaceConfig:{drawingBufferColorSpace:T}}),m(t,T,{primaries:r,whitePoint:n,transfer:C,toXYZ:tt,fromXYZ:et,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:T}}),t)),e}var it,nt=rt();function st(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function at(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var ot=function(){function t(){_(this,t)}return b(t,null,[{key:"getDataURL",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===it&&(it=N("canvas")),it.width=t.width,it.height=t.height;var i=it.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=it}return e.toDataURL(r)}},{key:"sRGBToLinear",value:function(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var e=N("canvas");e.width=t.width,e.height=t.height;var r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);for(var i=r.getImageData(0,0,t.width,t.height),n=i.data,s=0;s<n.length;s++)n[s]=255*st(n[s]/255);return r.putImageData(i,0,0),e}if(t.data){for(var a=t.data.slice(0),o=0;o<a.length;o++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[o]=Math.floor(255*st(a[o]/255)):a[o]=st(a[o]);return{data:a,width:t.width,height:t.height}}return V("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}]),t}(),ut=0,ht=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_(this,t),this.isSource=!0,Object.defineProperty(this,"id",{value:ut++}),this.uuid=B(),this.data=e,this.dataReady=!0,this.version=0}return b(t,[{key:"getSize",value:function(t){var e=this.data;return"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):null!==e?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];var r={uuid:this.uuid,url:""},i=this.data;if(null!==i){var n;if(Array.isArray(i)){n=[];for(var s=0,a=i.length;s<a;s++)i[s].isDataTexture?n.push(lt(i[s].image)):n.push(lt(i[s]))}else n=lt(i);r.url=n}return e||(t.images[this.uuid]=r),r}}]),t}();function lt(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?ot.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(V("Texture: Unable to serialize Texture."),{})}var ct=0,ft=new Z,yt=function(t){c(r,t);var e=y(r);function r(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DEFAULT_IMAGE,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.DEFAULT_MAPPING,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:r.DEFAULT_ANISOTROPY,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"";return _(this,r),(t=e.call(this)).isTexture=!0,Object.defineProperty(v(t),"id",{value:ct++}),t.uuid=B(),t.name="",t.source=new ht(i),t.mipmaps=[],t.mapping=n,t.channel=0,t.wrapS=s,t.wrapT=a,t.magFilter=o,t.minFilter=u,t.anisotropy=c,t.format=h,t.internalFormat=null,t.type=l,t.offset=new H(0,0),t.repeat=new H(1,1),t.center=new H(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new K,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.colorSpace=f,t.userData={},t.updateRanges=[],t.version=0,t.onUpdate=null,t.renderTarget=null,t.isRenderTargetTexture=!1,t.isArrayTexture=!!(i&&i.depth&&i.depth>1),t.pmremVersion=0,t}return b(r,[{key:"width",get:function(){return this.source.getSize(ft).x}},{key:"height",get:function(){return this.source.getSize(ft).y}},{key:"depth",get:function(){return this.source.getSize(ft).z}},{key:"image",get:function(){return this.source.data},set:function(t){void 0===t&&(t=null),this.source.data=t}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"addUpdateRange",value:function(t,e){this.updateRanges.push({start:t,count:e})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}},{key:"setValues",value:function(t){for(var e in t){var r=t[e];if(void 0!==r){var i=this[e];void 0!==i?i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[e]=r:V("Texture.setValues(): property '".concat(e,"' does not exist."))}else V("Texture.setValues(): parameter '".concat(e,"' has value of undefined."))}}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),e||(t.textures[this.uuid]=r),r}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case x:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case x:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(t){!0===t&&this.pmremVersion++}}]),r}(U);yt.DEFAULT_IMAGE=null,yt.DEFAULT_MAPPING=300,yt.DEFAULT_ANISOTROPY=1;var pt=function(){function t(e,r,i,n,s,a,o,u,h,l,c,f,y,p,v,d){_(this,t),t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,r,i,n,s,a,o,u,h,l,c,f,y,p,v,d)}return b(t,[{key:"set",value:function(t,e,r,i,n,s,a,o,u,h,l,c,f,y,p,v){var d=this.elements;return d[0]=t,d[4]=e,d[8]=r,d[12]=i,d[1]=n,d[5]=s,d[9]=a,d[13]=o,d[2]=u,d[6]=h,d[10]=l,d[14]=c,d[3]=f,d[7]=y,d[11]=p,d[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,r){return 0===this.determinant()?(t.set(1,0,0),e.set(0,1,0),r.set(0,0,1),this):(t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this)}},{key:"makeBasis",value:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){if(0===t.determinant())return this.identity();var e=this.elements,r=t.elements,i=1/vt.setFromMatrixColumn(t,0).length(),n=1/vt.setFromMatrixColumn(t,1).length(),s=1/vt.setFromMatrixColumn(t,2).length();return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=0,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=0,e[8]=r[8]*s,e[9]=r[9]*s,e[10]=r[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var e=this.elements,r=t.x,i=t.y,n=t.z,s=Math.cos(r),a=Math.sin(r),o=Math.cos(i),u=Math.sin(i),h=Math.cos(n),l=Math.sin(n);if("XYZ"===t.order){var c=s*h,f=s*l,y=a*h,p=a*l;e[0]=o*h,e[4]=-o*l,e[8]=u,e[1]=f+y*u,e[5]=c-p*u,e[9]=-a*o,e[2]=p-c*u,e[6]=y+f*u,e[10]=s*o}else if("YXZ"===t.order){var v=o*h,d=o*l,g=u*h,m=u*l;e[0]=v+m*a,e[4]=g*a-d,e[8]=s*u,e[1]=s*l,e[5]=s*h,e[9]=-a,e[2]=d*a-g,e[6]=m+v*a,e[10]=s*o}else if("ZXY"===t.order){var _=o*h,k=o*l,b=u*h,x=u*l;e[0]=_-x*a,e[4]=-s*l,e[8]=b+k*a,e[1]=k+b*a,e[5]=s*h,e[9]=x-_*a,e[2]=-s*u,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){var M=s*h,w=s*l,A=a*h,T=a*l;e[0]=o*h,e[4]=A*u-w,e[8]=M*u+T,e[1]=o*l,e[5]=T*u+M,e[9]=w*u-A,e[2]=-u,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){var S=s*o,E=s*u,C=a*o,R=a*u;e[0]=o*h,e[4]=R-S*l,e[8]=C*l+E,e[1]=l,e[5]=s*h,e[9]=-a*h,e[2]=-u*h,e[6]=E*l+C,e[10]=S-R*l}else if("XZY"===t.order){var I=s*o,z=s*u,O=a*o,N=a*u;e[0]=o*h,e[4]=-l,e[8]=u*h,e[1]=I*l+N,e[5]=s*h,e[9]=z*l-O,e[2]=O*l-z,e[6]=a*h,e[10]=N*l+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(gt,t,mt)}},{key:"lookAt",value:function(t,e,r){var i=this.elements;return bt.subVectors(t,e),0===bt.lengthSq()&&(bt.z=1),bt.normalize(),_t.crossVectors(r,bt),0===_t.lengthSq()&&(1===Math.abs(r.z)?bt.x+=1e-4:bt.z+=1e-4,bt.normalize(),_t.crossVectors(r,bt)),_t.normalize(),kt.crossVectors(bt,_t),i[0]=_t.x,i[4]=kt.x,i[8]=bt.x,i[1]=_t.y,i[5]=kt.y,i[9]=bt.y,i[2]=_t.z,i[6]=kt.z,i[10]=bt.z,this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var r=t.elements,i=e.elements,n=this.elements,s=r[0],a=r[4],o=r[8],u=r[12],h=r[1],l=r[5],c=r[9],f=r[13],y=r[2],p=r[6],v=r[10],d=r[14],g=r[3],m=r[7],_=r[11],k=r[15],b=i[0],x=i[4],M=i[8],w=i[12],A=i[1],T=i[5],S=i[9],E=i[13],C=i[2],R=i[6],I=i[10],z=i[14],O=i[3],N=i[7],F=i[11],V=i[15];return n[0]=s*b+a*A+o*C+u*O,n[4]=s*x+a*T+o*R+u*N,n[8]=s*M+a*S+o*I+u*F,n[12]=s*w+a*E+o*z+u*V,n[1]=h*b+l*A+c*C+f*O,n[5]=h*x+l*T+c*R+f*N,n[9]=h*M+l*S+c*I+f*F,n[13]=h*w+l*E+c*z+f*V,n[2]=y*b+p*A+v*C+d*O,n[6]=y*x+p*T+v*R+d*N,n[10]=y*M+p*S+v*I+d*F,n[14]=y*w+p*E+v*z+d*V,n[3]=g*b+m*A+_*C+k*O,n[7]=g*x+m*T+_*R+k*N,n[11]=g*M+m*S+_*I+k*F,n[15]=g*w+m*E+_*z+k*V,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],r=t[4],i=t[8],n=t[12],s=t[1],a=t[5],o=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14],y=t[3],p=t[7],v=t[11],d=t[15],g=o*f-u*c,m=a*f-u*l,_=a*c-o*l,k=s*f-u*h,b=s*c-o*h,x=s*l-a*h;return e*(p*g-v*m+d*_)-r*(y*g-v*k+d*b)+i*(y*m-p*k+d*x)-n*(y*_-p*b+v*x)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,r){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=r),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],u=t[7],h=t[8],l=t[9],c=t[10],f=t[11],y=t[12],p=t[13],v=t[14],d=t[15],g=l*v*u-p*c*u+p*o*f-a*v*f-l*o*d+a*c*d,m=y*c*u-h*v*u-y*o*f+s*v*f+h*o*d-s*c*d,_=h*p*u-y*l*u+y*a*f-s*p*f-h*a*d+s*l*d,k=y*l*o-h*p*o-y*a*c+s*p*c+h*a*v-s*l*v,b=e*g+r*m+i*_+n*k;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var x=1/b;return t[0]=g*x,t[1]=(p*c*n-l*v*n-p*i*f+r*v*f+l*i*d-r*c*d)*x,t[2]=(a*v*n-p*o*n+p*i*u-r*v*u-a*i*d+r*o*d)*x,t[3]=(l*o*n-a*c*n-l*i*u+r*c*u+a*i*f-r*o*f)*x,t[4]=m*x,t[5]=(h*v*n-y*c*n+y*i*f-e*v*f-h*i*d+e*c*d)*x,t[6]=(y*o*n-s*v*n-y*i*u+e*v*u+s*i*d-e*o*d)*x,t[7]=(s*c*n-h*o*n+h*i*u-e*c*u-s*i*f+e*o*f)*x,t[8]=_*x,t[9]=(y*l*n-h*p*n-y*r*f+e*p*f+h*r*d-e*l*d)*x,t[10]=(s*p*n-y*a*n+y*r*u-e*p*u-s*r*d+e*a*d)*x,t[11]=(h*a*n-s*l*n-h*r*u+e*l*u+s*r*f-e*a*f)*x,t[12]=k*x,t[13]=(h*p*i-y*l*i+y*r*c-e*p*c-h*r*v+e*l*v)*x,t[14]=(y*a*i-s*p*i-y*r*o+e*p*o+s*r*v-e*a*v)*x,t[15]=(s*l*i-h*a*i+h*r*o-e*l*o-s*r*c+e*a*c)*x,this}},{key:"scale",value:function(t){var e=this.elements,r=t.x,i=t.y,n=t.z;return e[0]*=r,e[4]*=i,e[8]*=n,e[1]*=r,e[5]*=i,e[9]*=n,e[2]*=r,e[6]*=i,e[10]*=n,e[3]*=r,e[7]*=i,e[11]*=n,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,i))}},{key:"makeTranslation",value:function(t,e,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var r=Math.cos(e),i=Math.sin(e),n=1-r,s=t.x,a=t.y,o=t.z,u=n*s,h=n*a;return this.set(u*s+r,u*a-i*o,u*o+i*a,0,u*a+i*o,h*a+r,h*o-i*s,0,u*o-i*a,h*o+i*s,n*o*o+r,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,r,i,n,s){return this.set(1,r,n,0,t,1,s,0,e,i,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,r){var i=this.elements,n=e._x,s=e._y,a=e._z,o=e._w,u=n+n,h=s+s,l=a+a,c=n*u,f=n*h,y=n*l,p=s*h,v=s*l,d=a*l,g=o*u,m=o*h,_=o*l,k=r.x,b=r.y,x=r.z;return i[0]=(1-(p+d))*k,i[1]=(f+_)*k,i[2]=(y-m)*k,i[3]=0,i[4]=(f-_)*b,i[5]=(1-(c+d))*b,i[6]=(v+g)*b,i[7]=0,i[8]=(y+m)*x,i[9]=(v-g)*x,i[10]=(1-(c+p))*x,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}},{key:"decompose",value:function(t,e,r){var i=this.elements;if(t.x=i[12],t.y=i[13],t.z=i[14],0===this.determinant())return r.set(1,1,1),e.identity(),this;var n=vt.set(i[0],i[1],i[2]).length(),s=vt.set(i[4],i[5],i[6]).length(),a=vt.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),dt.copy(this);var o=1/n,u=1/s,h=1/a;return dt.elements[0]*=o,dt.elements[1]*=o,dt.elements[2]*=o,dt.elements[4]*=u,dt.elements[5]*=u,dt.elements[6]*=u,dt.elements[8]*=h,dt.elements[9]*=h,dt.elements[10]*=h,e.setFromRotationMatrix(dt),r.x=n,r.y=s,r.z=a,this}},{key:"makePerspective",value:function(t,e,r,i,n,s){var a,o,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:z,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=this.elements,c=2*n/(e-t),f=2*n/(r-i),y=(e+t)/(e-t),p=(r+i)/(r-i);if(h)a=n/(s-n),o=s*n/(s-n);else if(u===z)a=-(s+n)/(s-n),o=-2*s*n/(s-n);else{if(u!==O)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);a=-s/(s-n),o=-s*n/(s-n)}return l[0]=c,l[4]=0,l[8]=y,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=a,l[14]=o,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}},{key:"makeOrthographic",value:function(t,e,r,i,n,s){var a,o,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:z,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=this.elements,c=2/(e-t),f=2/(r-i),y=-(e+t)/(e-t),p=-(r+i)/(r-i);if(h)a=1/(s-n),o=s/(s-n);else if(u===z)a=-2/(s-n),o=-(s+n)/(s-n);else{if(u!==O)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);a=-1/(s-n),o=-n/(s-n)}return l[0]=c,l[4]=0,l[8]=0,l[12]=y,l[1]=0,l[5]=f,l[9]=0,l[13]=p,l[2]=0,l[6]=0,l[10]=a,l[14]=o,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,r=t.elements,i=0;i<16;i++)if(e[i]!==r[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<16;r++)this.elements[r]=t[r+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}]),t}(),vt=new Z,dt=new pt,gt=new Z(0,0,0),mt=new Z(1,1,1),_t=new Z,kt=new Z,bt=new Z,xt=new pt,Mt=new G,wt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;_(this,t),this.isEuler=!0,this._x=e,this._y=r,this._z=i,this._order=n}return b(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=r,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.elements,n=i[0],s=i[4],a=i[8],o=i[1],u=i[5],h=i[9],l=i[2],c=i[6],f=i[10];switch(e){case"XYZ":this._y=Math.asin(j(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(c,u),this._z=0);break;case"YXZ":this._x=Math.asin(-j(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(o,u)):(this._y=Math.atan2(-l,n),this._z=0);break;case"ZXY":this._x=Math.asin(j(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-l,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-j(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(c,f),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(j(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-l,n)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-j(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(c,u),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-h,f),this._y=0);break;default:V("Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===r&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,r){return xt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(xt,e,r)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return Mt.setFromEuler(this),this.setFromQuaternion(Mt,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._x;case 2:return t.next=4,this._y;case 4:return t.next=6,this._z;case 6:return t.next=8,this._order;case 8:case"end":return t.stop()}}),t,this)}))}]),t}();wt.DEFAULT_ORDER="XYZ";var At=function(){function t(){_(this,t),this.mask=1}return b(t,[{key:"set",value:function(t){this.mask=(1<<t|0)>>>0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}},{key:"isEnabled",value:function(t){return 0!=(this.mask&(1<<t|0))}}]),t}(),Tt=0,St=new Z,Et=new G,Ct=new pt,Rt=new Z,It=new Z,zt=new Z,Ot=new G,Nt=new Z(1,0,0),Ft=new Z(0,1,0),Vt=new Z(0,0,1),Pt={type:"added"},Dt={type:"removed"},Ut={type:"childadded",child:null},Lt={type:"childremoved",child:null},Bt=function(t){c(r,t);var e=y(r);function r(){var t;_(this,r),(t=e.call(this)).isObject3D=!0,Object.defineProperty(v(t),"id",{value:Tt++}),t.uuid=B(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=r.DEFAULT_UP.clone();var i=new Z,n=new wt,s=new G,a=new Z(1,1,1);return n._onChange((function(){s.setFromEuler(n,!1)})),s._onChange((function(){n.setFromQuaternion(s,void 0,!1)})),Object.defineProperties(v(t),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new pt},normalMatrix:{value:new K}}),t.matrix=new pt,t.matrixWorld=new pt,t.matrixAutoUpdate=r.DEFAULT_MATRIX_AUTO_UPDATE,t.matrixWorldAutoUpdate=r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,t.matrixWorldNeedsUpdate=!1,t.layers=new At,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.customDepthMaterial=void 0,t.customDistanceMaterial=void 0,t.userData={},t}return b(r,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(t){return this.quaternion.premultiply(t),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(t){this.quaternion.copy(t)}},{key:"rotateOnAxis",value:function(t,e){return Et.setFromAxisAngle(t,e),this.quaternion.multiply(Et),this}},{key:"rotateOnWorldAxis",value:function(t,e){return Et.setFromAxisAngle(t,e),this.quaternion.premultiply(Et),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(Nt,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(Ft,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(Vt,t)}},{key:"translateOnAxis",value:function(t,e){return St.copy(t).applyQuaternion(this.quaternion),this.position.add(St.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(Nt,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(Ft,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(Vt,t)}},{key:"localToWorld",value:function(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ct.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,r){t.isVector3?Rt.copy(t):Rt.set(t,e,r);var i=this.parent;this.updateWorldMatrix(!0,!1),It.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ct.lookAt(It,Rt,this.up):Ct.lookAt(Rt,It,this.up),this.quaternion.setFromRotationMatrix(Ct),i&&(Ct.extractRotation(i.matrixWorld),Et.setFromRotationMatrix(Ct),this.quaternion.premultiply(Et.invert()))}},{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(P("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Pt),Ut.child=t,this.dispatchEvent(Ut),Ut.child=null):P("Object3D.add: object not an instance of THREE.Object3D.",t),this)}},{key:"remove",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Dt),Lt.child=t,this.dispatchEvent(Lt),Lt.child=null),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,h(this.children))}},{key:"attach",value:function(t){return this.updateWorldMatrix(!0,!1),Ct.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ct.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ct),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Pt),Ut.child=t,this.dispatchEvent(Ut),Ut.child=null,this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var r=0,i=this.children.length;r<i;r++){var n=this.children[r].getObjectByProperty(t,e);if(void 0!==n)return n}}},{key:"getObjectsByProperty",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[t]===e&&r.push(this);for(var i=this.children,n=0,s=i.length;n<s;n++)i[n].getObjectsByProperty(t,e,r);return r}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(It,t,zt),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(It,Ot,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,i=e.length;r<i;r++)e[r].updateMatrixWorld(t)}},{key:"updateWorldMatrix",value:function(t,e){var r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e)for(var i=this.children,n=0,s=i.length;n<s;n++)i[n].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});var i={};function n(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map((function(t){return u(u({},t),{},{boundingBox:t.boundingBox?t.boundingBox.toJSON():void 0,boundingSphere:t.boundingSphere?t.boundingSphere.toJSON():void 0})})),i.instanceInfo=this._instanceInfo.map((function(t){return u({},t)})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(t),i.indirectTexture=this._indirectTexture.toJSON(t),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(t.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes){var a=s.shapes;if(Array.isArray(a))for(var o=0,h=a.length;o<h;o++){var l=a[o];n(t.shapes,l)}else n(t.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(n(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],f=0,y=this.material.length;f<y;f++)c.push(n(t.materials,this.material[f]));i.material=c}else i.material=n(t.materials,this.material);if(this.children.length>0){i.children=[];for(var p=0;p<this.children.length;p++)i.children.push(this.children[p].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(var v=0;v<this.animations.length;v++){var d=this.animations[v];i.animations.push(n(t.animations,d))}}if(e){var g=A(t.geometries),m=A(t.materials),_=A(t.textures),k=A(t.images),b=A(t.shapes),x=A(t.skeletons),M=A(t.animations),w=A(t.nodes);g.length>0&&(r.geometries=g),m.length>0&&(r.materials=m),_.length>0&&(r.textures=_),k.length>0&&(r.images=k),b.length>0&&(r.shapes=b),x.length>0&&(r.skeletons=x),M.length>0&&(r.animations=M),w.length>0&&(r.nodes=w)}return r.object=i,r;function A(t){var e=[];for(var r in t){var i=t[r];delete i.metadata,e.push(i)}return e}}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var r=0;r<t.children.length;r++){var i=t.children[r];this.add(i.clone())}return this}}]),r}(U);Bt.DEFAULT_UP=new Z(0,1,0),Bt.DEFAULT_MATRIX_AUTO_UPDATE=!0,Bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wt={h:0,s:0,l:0},Xt={h:0,s:0,l:0};function Yt(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}var qt=function(){function t(e,r,i){return _(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,i)}return b(t,[{key:"set",value:function(t,e,r){if(void 0===e&&void 0===r){var i=t;i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i)}else this.setRGB(t,e,r);return this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,nt.colorSpaceToWorking(this,e),this}},{key:"setRGB",value:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nt.workingColorSpace;return this.r=t,this.g=e,this.b=r,nt.colorSpaceToWorking(this,i),this}},{key:"setHSL",value:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:nt.workingColorSpace;if(t=W(t,1),e=j(e,0,1),r=j(r,0,1),0===e)this.r=this.g=this.b=r;else{var n=r<=.5?r*(1+e):r+e-r*e,s=2*r-n;this.r=Yt(s,n,t+1/3),this.g=Yt(s,n,t),this.b=Yt(s,n,t-1/3)}return nt.colorSpaceToWorking(this,i),this}},{key:"setStyle",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;function i(e){void 0!==e&&parseFloat(e)<1&&V("Color: Alpha component of "+t+" will be ignored.")}if(e=/^(\w+)\(([^\)]*)\)/.exec(t)){var n,s=e[1],a=e[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setRGB(Math.min(255,parseInt(n[1],10))/255,Math.min(255,parseInt(n[2],10))/255,Math.min(255,parseInt(n[3],10))/255,r);if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setRGB(Math.min(100,parseInt(n[1],10))/100,Math.min(100,parseInt(n[2],10))/100,Math.min(100,parseInt(n[3],10))/100,r);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setHSL(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,r);break;default:V("Color: Unknown color model "+t)}}else if(e=/^\#([A-Fa-f\d]+)$/.exec(t)){var o=e[1],u=o.length;if(3===u)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,r);if(6===u)return this.setHex(parseInt(o,16),r);V("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,r);return this}},{key:"setColorName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,r=jt[t.toLowerCase()];return void 0!==r?this.setHex(r,e):V("Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copySRGBToLinear",value:function(t){return this.r=st(t.r),this.g=st(t.g),this.b=st(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=at(t.r),this.g=at(t.g),this.b=at(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return nt.workingToColorSpace(Ht.copy(this),t),65536*Math.round(j(255*Ht.r,0,255))+256*Math.round(j(255*Ht.g,0,255))+Math.round(j(255*Ht.b,0,255))}},{key:"getHexString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return("000000"+this.getHex(t).toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nt.workingColorSpace;nt.workingToColorSpace(Ht.copy(this),e);var r,i,n=Ht.r,s=Ht.g,a=Ht.b,o=Math.max(n,s,a),u=Math.min(n,s,a),h=(u+o)/2;if(u===o)r=0,i=0;else{var l=o-u;switch(i=h<=.5?l/(o+u):l/(2-o-u),o){case n:r=(s-a)/l+(s<a?6:0);break;case s:r=(a-n)/l+2;break;case a:r=(n-s)/l+4}r/=6}return t.h=r,t.s=i,t.l=h,t}},{key:"getRGB",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nt.workingColorSpace;return nt.workingToColorSpace(Ht.copy(this),e),t.r=Ht.r,t.g=Ht.g,t.b=Ht.b,t}},{key:"getStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;nt.workingToColorSpace(Ht.copy(this),t);var e=Ht.r,r=Ht.g,i=Ht.b;return t!==T?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(r.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*e),",").concat(Math.round(255*r),",").concat(Math.round(255*i),")")}},{key:"offsetHSL",value:function(t,e,r){return this.getHSL(Wt),this.setHSL(Wt.h+t,Wt.s+e,Wt.l+r)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,r){return this.r=t.r+(e.r-t.r)*r,this.g=t.g+(e.g-t.g)*r,this.b=t.b+(e.b-t.b)*r,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(Wt),t.getHSL(Xt);var r=X(Wt.h,Xt.h,e),i=X(Wt.s,Xt.s,e),n=X(Wt.l,Xt.l,e);return this.setHSL(r,i,n),this}},{key:"setFromVector3",value:function(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}},{key:"applyMatrix3",value:function(t){var e=this.r,r=this.g,i=this.b,n=t.elements;return this.r=n[0]*e+n[3]*r+n[6]*i,this.g=n[1]*e+n[4]*r+n[7]*i,this.b=n[2]*e+n[5]*r+n[8]*i,this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.r;case 2:return t.next=4,this.g;case 4:return t.next=6,this.b;case 6:case"end":return t.stop()}}),t,this)}))}]),t}(),Ht=new qt;qt.NAMES=jt;var Gt=new Z,Zt=new H,Jt=0,Qt=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Jt++}),this.name="",this.array=e,this.itemSize=r,this.count=void 0!==e?e.length/r:0,this.normalized=i,this.usage=R,this.updateRanges=[],this.gpuType=1015,this.version=0}return b(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"addUpdateRange",value:function(t,e){this.updateRanges.push({start:t,count:e})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}},{key:"copyAt",value:function(t,e,r){t*=this.itemSize,r*=e.itemSize;for(var i=0,n=this.itemSize;i<n;i++)this.array[t+i]=e.array[r+i];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,r=this.count;e<r;e++)Zt.fromBufferAttribute(this,e),Zt.applyMatrix3(t),this.setXY(e,Zt.x,Zt.y);else if(3===this.itemSize)for(var i=0,n=this.count;i<n;i++)Gt.fromBufferAttribute(this,i),Gt.applyMatrix3(t),this.setXYZ(i,Gt.x,Gt.y,Gt.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,r=this.count;e<r;e++)Gt.fromBufferAttribute(this,e),Gt.applyMatrix4(t),this.setXYZ(e,Gt.x,Gt.y,Gt.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,r=this.count;e<r;e++)Gt.fromBufferAttribute(this,e),Gt.applyNormalMatrix(t),this.setXYZ(e,Gt.x,Gt.y,Gt.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,r=this.count;e<r;e++)Gt.fromBufferAttribute(this,e),Gt.transformDirection(t),this.setXYZ(e,Gt.x,Gt.y,Gt.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getComponent",value:function(t,e){var r=this.array[t*this.itemSize+e];return this.normalized&&(r=Y(r,this.array)),r}},{key:"setComponent",value:function(t,e,r){return this.normalized&&(r=q(r,this.array)),this.array[t*this.itemSize+e]=r,this}},{key:"getX",value:function(t){var e=this.array[t*this.itemSize];return this.normalized&&(e=Y(e,this.array)),e}},{key:"setX",value:function(t,e){return this.normalized&&(e=q(e,this.array)),this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){var e=this.array[t*this.itemSize+1];return this.normalized&&(e=Y(e,this.array)),e}},{key:"setY",value:function(t,e){return this.normalized&&(e=q(e,this.array)),this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){var e=this.array[t*this.itemSize+2];return this.normalized&&(e=Y(e,this.array)),e}},{key:"setZ",value:function(t,e){return this.normalized&&(e=q(e,this.array)),this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){var e=this.array[t*this.itemSize+3];return this.normalized&&(e=Y(e,this.array)),e}},{key:"setW",value:function(t,e){return this.normalized&&(e=q(e,this.array)),this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,r){return t*=this.itemSize,this.normalized&&(e=q(e,this.array),r=q(r,this.array)),this.array[t+0]=e,this.array[t+1]=r,this}},{key:"setXYZ",value:function(t,e,r,i){return t*=this.itemSize,this.normalized&&(e=q(e,this.array),r=q(r,this.array),i=q(i,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this}},{key:"setXYZW",value:function(t,e,r,i,n){return t*=this.itemSize,this.normalized&&(e=q(e,this.array),r=q(r,this.array),i=q(i,this.array),n=q(n,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=n,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==R&&(t.usage=this.usage),t}}]),t}();function Kt(t,e){return t&&t.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t):t}var $t=function(){function t(e,r,i,n){_(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new r.constructor(i),this.sampleValues=r,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return b(t,[{key:"evaluate",value:function(t){var e=this.parameterPositions,r=this._cachedIndex,i=e[r],n=e[r-1];t:{e:{var s;r:{i:if(!(t<i)){for(var a=r+2;;){if(void 0===i){if(t<n)break i;return r=e.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(n=i,t<(i=e[++r]))break e}s=e.length;break r}if(t>=n)break t;var o=e[1];t<o&&(r=2,n=o);for(var u=r-2;;){if(void 0===n)return this._cachedIndex=0,this.copySampleValue_(0);if(r===u)break;if(i=n,t>=(n=e[--r-1]))break e}s=r,r=0}for(;r<s;){var h=r+s>>>1;t<e[h]?s=h:r=h+1}if(i=e[r],void 0===(n=e[r-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return r=e.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,t,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=t*i,s=0;s!==i;++s)e[s]=r[n+s];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),t}(),te=function(t){c(r,t);var e=y(r);function r(t,i,n,s){var a;return _(this,r),(a=e.call(this,t,i,n,s))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:2400,endingEnd:2400},a}return b(r,[{key:"intervalChanged_",value:function(t,e,r){var i=this.parameterPositions,n=t-2,s=t+1,a=i[n],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:n=t,a=2*e-r;break;case 2402:a=e+i[n=i.length-2]-i[n+1];break;default:n=t,a=r}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=t,o=2*r-e;break;case 2402:s=1,o=r+i[1]-i[0];break;default:s=t-1,o=e}var u=.5*(r-e),h=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(o-r),this._offsetPrev=n*h,this._offsetNext=s*h}},{key:"interpolate_",value:function(t,e,r,i){for(var n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,u=o-a,h=this._offsetPrev,l=this._offsetNext,c=this._weightPrev,f=this._weightNext,y=(r-e)/(i-e),p=y*y,v=p*y,d=-c*v+2*c*p-c*y,g=(1+c)*v+(-1.5-2*c)*p+(-.5+c)*y+1,m=(-1-f)*v+(1.5+f)*p+.5*y,_=f*v-f*p,k=0;k!==a;++k)n[k]=d*s[h+k]+g*s[u+k]+m*s[o+k]+_*s[l+k];return n}}]),r}($t),ee=function(t){c(r,t);var e=y(r);function r(t,i,n,s){return _(this,r),e.call(this,t,i,n,s)}return b(r,[{key:"interpolate_",value:function(t,e,r,i){for(var n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=t*a,u=o-a,h=(r-e)/(i-e),l=1-h,c=0;c!==a;++c)n[c]=s[u+c]*l+s[o+c]*h;return n}}]),r}($t),re=function(t){c(r,t);var e=y(r);function r(t,i,n,s){return _(this,r),e.call(this,t,i,n,s)}return b(r,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}]),r}($t),ie=function(){function t(e,r,i,n){if(_(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Kt(r,this.TimeBufferType),this.values=Kt(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}return b(t,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new re(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new ee(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new te(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e;switch(t){case M:e=this.InterpolantFactoryMethodDiscrete;break;case w:e=this.InterpolantFactoryMethodLinear;break;case A:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return V("KeyframeTrack:",r),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return M;case this.InterpolantFactoryMethodLinear:return w;case this.InterpolantFactoryMethodSmooth:return A}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,r=0,i=e.length;r!==i;++r)e[r]*=t;return this}},{key:"trim",value:function(t,e){for(var r=this.times,i=r.length,n=0,s=i-1;n!==i&&r[n]<t;)++n;for(;-1!==s&&r[s]>e;)--s;if(++s,0!==n||s!==i){n>=s&&(n=(s=Math.max(s,1))-1);var a=this.getValueSize();this.times=r.slice(n,s),this.values=this.values.slice(n*a,s*a)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(P("KeyframeTrack: Invalid value size in track.",this),t=!1);var r,i=this.times,n=this.values,s=i.length;0===s&&(P("KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==s;o++){var u=i[o];if("number"==typeof u&&isNaN(u)){P("KeyframeTrack: Time is not a valid number.",this,o,u),t=!1;break}if(null!==a&&a>u){P("KeyframeTrack: Out of order keys.",this,o,u,a),t=!1;break}a=u}if(void 0!==n&&(r=n,ArrayBuffer.isView(r)&&!(r instanceof DataView)))for(var h=0,l=n.length;h!==l;++h){var c=n[h];if(isNaN(c)){P("KeyframeTrack: Value is not a valid number.",this,h,c),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=this.times.slice(),e=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===A,n=t.length-1,s=1,a=1;a<n;++a){var o=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==t[0]))if(i)o=!0;else for(var h=a*r,l=h-r,c=h+r,f=0;f!==r;++f){var y=e[h+f];if(y!==e[l+f]||y!==e[c+f]){o=!0;break}}if(o){if(a!==s){t[s]=t[a];for(var p=a*r,v=s*r,d=0;d!==r;++d)e[v+d]=e[p+d]}++s}}if(n>0){t[s]=t[n];for(var g=n*r,m=s*r,_=0;_!==r;++_)e[m+_]=e[g+_];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*r)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=this.times.slice(),e=this.values.slice(),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}],[{key:"toJSON",value:function(t){var e,r=t.constructor;if(r.toJSON!==this.toJSON)e=r.toJSON(t);else{e={name:t.name,times:Kt(t.times,Array),values:Kt(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}]),t}();ie.prototype.ValueTypeName="",ie.prototype.TimeBufferType=Float32Array,ie.prototype.ValueBufferType=Float32Array,ie.prototype.DefaultInterpolation=w;var ne=function(t){c(r,t);var e=y(r);function r(t,i,n){return _(this,r),e.call(this,t,i,n)}return r}(ie);ne.prototype.ValueTypeName="bool",ne.prototype.ValueBufferType=Array,ne.prototype.DefaultInterpolation=M,ne.prototype.InterpolantFactoryMethodLinear=void 0,ne.prototype.InterpolantFactoryMethodSmooth=void 0,function(t){c(r,t);var e=y(r);function r(t,i,n,s){return _(this,r),e.call(this,t,i,n,s)}return r}(ie).prototype.ValueTypeName="color",function(t){c(r,t);var e=y(r);function r(t,i,n,s){return _(this,r),e.call(this,t,i,n,s)}return r}(ie).prototype.ValueTypeName="number";var se=function(t){c(r,t);var e=y(r);function r(t,i,n,s){return _(this,r),e.call(this,t,i,n,s)}return b(r,[{key:"interpolate_",value:function(t,e,r,i){for(var n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(r-e)/(i-e),u=t*a,h=u+a;u!==h;u+=4)G.slerpFlat(n,0,s,u-a,s,u,o);return n}}]),r}($t),ae=function(t){c(r,t);var e=y(r);function r(t,i,n,s){return _(this,r),e.call(this,t,i,n,s)}return b(r,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new se(this.times,this.values,this.getValueSize(),t)}}]),r}(ie);ae.prototype.ValueTypeName="quaternion",ae.prototype.InterpolantFactoryMethodSmooth=void 0;var oe=function(t){c(r,t);var e=y(r);function r(t,i,n){return _(this,r),e.call(this,t,i,n)}return r}(ie);oe.prototype.ValueTypeName="string",oe.prototype.ValueBufferType=Array,oe.prototype.DefaultInterpolation=M,oe.prototype.InterpolantFactoryMethodLinear=void 0,oe.prototype.InterpolantFactoryMethodSmooth=void 0,function(t){c(r,t);var e=y(r);function r(t,i,n,s){return _(this,r),e.call(this,t,i,n,s)}return r}(ie).prototype.ValueTypeName="vector";var ue=new(function(){function t(e,r,i){_(this,t);var n=this,s=!1,a=0,o=0,u=void 0,h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=i,this._abortController=null,this.itemStart=function(t){o++,!1===s&&void 0!==n.onStart&&n.onStart(t,a,o),s=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(s=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return u?u(t):t},this.setURLModifier=function(t){return u=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){var e=h.indexOf(t);return-1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(var e=0,r=h.length;e<r;e+=2){var i=h[e],n=h[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return n}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}return b(t,[{key:"abortController",get:function(){return this._abortController||(this._abortController=new AbortController),this._abortController}}]),t}());(function(){function t(e){_(this,t),this.manager=void 0!==e?e:ue,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return b(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var r=this;return new Promise((function(i,n){r.load(t,i,e,n)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}},{key:"abort",value:function(){return this}}]),t}()).DEFAULT_MATERIAL_NAME="__DEFAULT",Error,new WeakMap,new WeakMap;var he=new RegExp("[\\[\\]\\.:\\/]","g"),le="[^\\[\\]\\.:\\/]",ce="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",fe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",le)+/(WCOD+)?/.source.replace("WCOD",ce)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",le)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",le)+"$"),ye=["material","materials","bones","map"],pe=function(){function t(e,r,i){_(this,t);var n=i||ve.parseTrackName(r);this._targetGroup=e,this._bindings=e.subscribe_(r,n)}return b(t,[{key:"getValue",value:function(t,e){this.bind();var r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var r=this._bindings,i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}}]),t}(),ve=function(){function t(e,r,i){_(this,t),this.path=r,this.parsedPath=i||t.parseTrackName(r),this.node=t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return b(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)t[e++]=r[i]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,r=this.parsedPath,i=r.objectName,n=r.propertyName,s=r.propertyIndex;if(e||(e=t.findNode(this.rootNode,r.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var a=r.objectIndex;switch(i){case"materials":if(!e.material)return void P("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void P("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void P("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void P("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void P("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void P("PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==a){if(void 0===e[a])return void P("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var u=e[n];if(void 0!==u){var h=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?h=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(h=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===n){if(!e.geometry)return void P("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void P("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[s]&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=s}else void 0!==u.fromArray&&void 0!==u.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(l=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][h]}else P("PropertyBinding: Trying to update property for track: "+r.nodeName+"."+n+" but it wasn't found.",e)}else V("PropertyBinding: No target node found for track: "+this.path+".")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,r,i){return e&&e.isAnimationObjectGroup?new t.Composite(e,r,i):new t(e,r,i)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(he,"")}},{key:"parseTrackName",value:function(t){var e=fe.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var r={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=r.nodeName.substring(i+1);-1!==ye.indexOf(n)&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}},{key:"findNode",value:function(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=t.skeleton.getBoneByName(e);if(void 0!==r)return r}if(t.children){var i=function t(r){for(var i=0;i<r.length;i++){var n=r[i];if(n.name===e||n.uuid===e)return n;var s=t(n.children);if(s)return s}return null}(t.children);if(i)return i}return null}}]),t}();ve.Composite=pe,ve.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ve.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ve.prototype.GetterByBindingType=[ve.prototype._getValue_direct,ve.prototype._getValue_array,ve.prototype._getValue_arrayElement,ve.prototype._getValue_toArray],ve.prototype.SetterByBindingTypeAndVersioning=[[ve.prototype._setValue_direct,ve.prototype._setValue_direct_setNeedsUpdate,ve.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ve.prototype._setValue_array,ve.prototype._setValue_array_setNeedsUpdate,ve.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ve.prototype._setValue_arrayElement,ve.prototype._setValue_arrayElement_setNeedsUpdate,ve.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ve.prototype._setValue_fromArray,ve.prototype._setValue_fromArray_setNeedsUpdate,ve.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"182"}})),"undefined"!=typeof window&&(window.__THREE__?V("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="182"),new H,new H,new Z,new Z,new Z,new K,new pt,new pt,new G,new G,new Z(1,0,0),new Z(0,1,0);var de=function(t,e,r){var i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s+r[15];return t[0]=(r[0]*i+r[4]*n+r[8]*s+r[12])/(a||1),t[1]=(r[1]*i+r[5]*n+r[9]*s+r[13])/(a||1),t[2]=(r[2]*i+r[6]*n+r[10]*s+r[14])/(a||1),t},ge={SCALE:100,TAG_FLAG:1,SCULPT_FLAG:1,STATE_FLAG:1,TRI_INDEX:4294967295,cursors:{}};ge.cursors.dropper="url(resources/dropper.png) 5 25, auto",ge.linearToSRGB1=function(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},ge.sRGBToLinear1=function(t){return t<.04045?t*(1/12.92):Math.pow((t+.055)*(1/1.055),2.4)},ge.extend=function(t,e){for(var r=Object.keys(e),i=0,n=r.length;i<n;++i){var s=r[i];void 0===t[s]&&(t[s]=e[s])}return t},ge.invert=function(t){for(var e=Object.keys(t),r={},i=0,n=e.length;i<n;++i)r[t[e[i]]]=e[i];return r},ge.replaceElement=function(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i]===e)return void(t[i]=r)},ge.removeElement=function(t,e){for(var r=0,i=t.length;r<i;++r)if(t[r]===e)return t[r]=t[i-1],void t.pop()},ge.appendArray=function(t,e){var r=t.length,i=e.length;t.length+=i;for(var n=0;n<i;++n)t[r+n]=e[n]},ge.isPowerOfTwo=function(t){return 0!==t&&0==(t&t-1)},ge.nextHighestPowerOfTwo=function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1};var me,_e,ke=function(t,e){return t-e};ge.tidy=function(t){t.sort(ke);var e=t.length,r=0,i=0;for(r=1;r<e;++r)t[i]!==t[r]&&(t[++i]=t[r]);r>1&&(t.length=i+1)},ge.intersectionArrays=function(t,e){for(var r=0,i=0,n=[],s=t.length,a=e.length;r<s&&i<a;)t[r]<e[i]?r++:t[r]>e[i]?i++:(n.push(t[r]),++r,++i);return n},ge.littleEndian=(me=new ArrayBuffer(2),new DataView(me).setInt16(0,256,!0),256===new Int16Array(me)[0]),ge.getBytes=function(t,e){return[t[e].charCodeAt(),t[e+1].charCodeAt(),t[e+2].charCodeAt(),t[e+3].charCodeAt()]},ge.getUint32=function(t,e){var r=ge.getBytes(t,e);return r[0]<<0|r[1]<<8|r[2]<<16|r[3]<<24},ge.getFloat32=function(t,e){var r=ge.getBytes(t,e),i=1-2*(r[3]>>7),n=(r[3]<<1&255|r[2]>>7)-127,s=(127&r[2])<<16|r[1]<<8|r[0];return 128===n?0!==s?NaN:i*(1/0):-127===n?i*s*Math.pow(2,-149):i*(1+s*Math.pow(2,-23))*Math.pow(2,n)},ge.ab2str=function(t){for(var e="",r=new Uint8Array(t),i=65535,n=0,s=r.length;n<s;n+=i){var a=r.subarray(n,i<s-n?i+n:s);e+=String.fromCharCode.apply(null,a)}return e},ge.getMemory=(_e=new ArrayBuffer(1e5),function(t){return _e.byteLength>=t?_e:_e=new ArrayBuffer(t)}),ge.now=Date.now||function(){return(new Date).getTime()},ge.throttle=function(t,e){var r,i=[],n=null,s=0,a=function(){s=ge.now(),n=null,r=t.apply(t,i)};return function(){for(var o=ge.now(),u=e-(o-s),h=i.length=arguments.length,l=0;l<h;++l)i[l]=arguments[l];return u<=0||u>e?(window.clearTimeout(n),n=null,s=o,r=t.apply(t,i)):n||(n=window.setTimeout(a,u)),r}},ge.normalizeArrayVec3=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=0,i=t.length/3;r<i;++r){var n=3*r,s=t[n],a=t[n+1],o=t[n+2],u=s*s+a*a+o*o;0!==u?(u=1/Math.sqrt(u),e[n]=s*u,e[n+1]=a*u,e[n+2]=o*u):e[n]=1}return e},ge.convertArrayVec3toSRGB=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=0,i=t.length;r<i;++r)e[r]=ge.linearToSRGB1(t[r]);return e},ge.convertArrayVec3toLinear=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=0,i=t.length;r<i;++r)e[r]=ge.sRGBToLinear1(t[r]);return e},ge.computeWorldVertices=function(t,e){var r,i,n,s,a=t.getNbVertices(),o=t.getVertices().subarray(0,3*a);e||(e=new Float32Array(3*a));for(var u=t.getMatrix(),h=new Float32Array(3),l=0;l<a;++l){var c=3*l;r=h,i=o[c],n=o[c+1],s=o[c+2],r[0]=i,r[1]=n,r[2]=s,de(h,h,u),e[c]=h[0],e[c+1]=h[1],e[c+2]=h[2]}return e};const be=ge;var xe={Action:{NOTHING:0,MASK_EDIT:1,SCULPT_EDIT:2,CAMERA_ZOOM:3,CAMERA_ROTATE:4,CAMERA_PAN:5,CAMERA_PAN_ZOOM_ALT:6},Tools:{BRUSH:0,INFLATE:1,TWIST:2,SMOOTH:3,FLATTEN:4,PINCH:5,CREASE:6,DRAG:7,PAINT:8,MOVE:9,MASKING:10,LOCALSCALE:11,TRANSFORM:12,ELEMENTSELECT:13},Shader:{PBR:0,FLAT:1,NORMAL:2,WIREFRAME:3,UV:4,MATCAP:5,SELECTION:6,BACKGROUND:7,MERGE:8,FXAA:9,CONTOUR:10,PAINTUV:11,BLUR:12},Projection:{PERSPECTIVE:0,ORTHOGRAPHIC:1},CameraMode:{ORBIT:0,SPHERICAL:1,PLANE:2},MultiState:{NONE:0,SCULPT:1,CAMERA:2,PICKING:3}},Me=Object.keys(xe.Tools).length;xe.KeyAction=be.extend({INTENSITY:Me++,RADIUS:Me++,NEGATIVE:Me++,PICKER:Me++,DELETE:Me++,CAMERA_FRONT:Me++,CAMERA_TOP:Me++,CAMERA_LEFT:Me++,CAMERA_RESET:Me++,STRIFE_LEFT:Me++,STRIFE_RIGHT:Me++,STRIFE_UP:Me++,STRIFE_DOWN:Me++,WIREFRAME:Me++,REMESH:Me++},xe.Tools);const we=xe;function Ae(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const Te=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._bufferAttribute=null,this._version=0}var e,r;return e=t,(r=[{key:"bind",value:function(){}},{key:"release",value:function(){this._bufferAttribute&&(this._bufferAttribute=null)}},{key:"update",value:function(t,e){t&&(this._bufferAttribute&&this._bufferAttribute.count===t.length/e?(this._bufferAttribute.set(t),this._bufferAttribute.needsUpdate=!0):(this._bufferAttribute=new Qt(t,e),this._bufferAttribute.setUsage(I)),this._version++)}},{key:"getBufferAttribute",value:function(){return this._bufferAttribute}}])&&Ae(e.prototype,r),t}();function Se(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ee={LINEAR:!1},Ce=function(){function t(e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._vArOut=r,this._cArOut=i,this._mArOut=n,this._vAr=e.getVertices(),this._cAr=e.getColors(),this._mAr=e.getMaterials(),this._eAr=e.getEdges(),this._nbVertices=e.getNbVertices(),this._tagEdges=new Int32Array(e.getNbEdges())}var e,r;return e=t,(r=[{key:"computeTriangleEdgeVertex",value:function(t,e,r,i){var n=this._vAr,s=this._cAr,a=this._mAr,o=this._eAr,u=this._vArOut,h=this._cArOut,l=this._mArOut,c=this._tagEdges,f=3*t,y=3*e,p=3*r,v=c[i]-1,d=-1===v?this._nbVertices++:v,g=3*d,m=o[i];if(1===m||m>=3||Ee.LINEAR){if(-1!==v)return d;c[i]=d+1,u[g]=.5*(n[f]+n[y]),u[g+1]=.5*(n[f+1]+n[y+1]),u[g+2]=.5*(n[f+2]+n[y+2]),h[g]=.5*(s[f]+s[y]),h[g+1]=.5*(s[f+1]+s[y+1]),h[g+2]=.5*(s[f+2]+s[y+2]),l[g]=.5*(a[f]+a[y]),l[g+1]=.5*(a[f+1]+a[y+1]),l[g+2]=.5*(a[f+2]+a[y+2])}else-1===v?(c[i]=d+1,u[g]=.125*n[p]+.375*(n[f]+n[y]),u[g+1]=.125*n[p+1]+.375*(n[f+1]+n[y+1]),u[g+2]=.125*n[p+2]+.375*(n[f+2]+n[y+2]),h[g]=.125*s[p]+.375*(s[f]+s[y]),h[g+1]=.125*s[p+1]+.375*(s[f+1]+s[y+1]),h[g+2]=.125*s[p+2]+.375*(s[f+2]+s[y+2]),l[g]=.125*a[p]+.375*(a[f]+a[y]),l[g+1]=.125*a[p+1]+.375*(a[f+1]+a[y+1]),l[g+2]=.125*a[p+2]+.375*(a[f+2]+a[y+2])):(u[g]+=.125*n[p],u[g+1]+=.125*n[p+1],u[g+2]+=.125*n[p+2],h[g]+=.125*s[p],h[g+1]+=.125*s[p+1],h[g+2]+=.125*s[p+2],l[g]+=.125*a[p],l[g+1]+=.125*a[p+1],l[g+2]+=.125*a[p+2]);return d}},{key:"computeQuadEdgeVertex",value:function(t,e,r,i,n){var s=this._vAr,a=this._cAr,o=this._mAr,u=this._eAr,h=this._vArOut,l=this._cArOut,c=this._mArOut,f=this._tagEdges,y=3*t,p=3*e,v=3*r,d=3*i,g=f[n]-1,m=-1===g?this._nbVertices++:g,_=3*m,k=u[n];if(1===k||k>=3||Ee.LINEAR){if(-1!==g)return m;f[n]=m+1,h[_]=.5*(s[y]+s[p]),h[_+1]=.5*(s[y+1]+s[p+1]),h[_+2]=.5*(s[y+2]+s[p+2]),l[_]=.5*(a[y]+a[p]),l[_+1]=.5*(a[y+1]+a[p+1]),l[_+2]=.5*(a[y+2]+a[p+2]),c[_]=.5*(o[y]+o[p]),c[_+1]=.5*(o[y+1]+o[p+1]),c[_+2]=.5*(o[y+2]+o[p+2])}else-1===g?(f[n]=m+1,h[_]=.0625*(s[v]+s[d])+.375*(s[y]+s[p]),h[_+1]=.0625*(s[v+1]+s[d+1])+.375*(s[y+1]+s[p+1]),h[_+2]=.0625*(s[v+2]+s[d+2])+.375*(s[y+2]+s[p+2]),l[_]=.0625*(a[v]+a[d])+.375*(a[y]+a[p]),l[_+1]=.0625*(a[v+1]+a[d+1])+.375*(a[y+1]+a[p+1]),l[_+2]=.0625*(a[v+2]+a[d+2])+.375*(a[y+2]+a[p+2]),c[_]=.0625*(o[v]+o[d])+.375*(o[y]+o[p]),c[_+1]=.0625*(o[v+1]+o[d+1])+.375*(o[y+1]+o[p+1]),c[_+2]=.0625*(o[v+2]+o[d+2])+.375*(o[y+2]+o[p+2])):(h[_]+=.0625*(s[v]+s[d]),h[_+1]+=.0625*(s[v+1]+s[d+1]),h[_+2]+=.0625*(s[v+2]+s[d+2]),l[_]+=.0625*(a[v]+a[d]),l[_+1]+=.0625*(a[v+1]+a[d+1]),l[_+2]+=.0625*(a[v+2]+a[d+2]),c[_]+=.0625*(o[v]+o[d]),c[_+1]+=.0625*(o[v+1]+o[d+1]),c[_+2]+=.0625*(o[v+2]+o[d+2]));return m}},{key:"computeFaceVertex",value:function(t,e,r,i){var n=3*t,s=3*e,a=3*r,o=3*i,u=this._vAr,h=this._cAr,l=this._mAr,c=this._vArOut,f=this._cArOut,y=this._mArOut,p=this._nbVertices++,v=3*p;return c[v]=.25*(u[n]+u[s]+u[a]+u[o]),c[v+1]=.25*(u[n+1]+u[s+1]+u[a+1]+u[o+1]),c[v+2]=.25*(u[n+2]+u[s+2]+u[a+2]+u[o+2]),f[v]=.25*(h[n]+h[s]+h[a]+h[o]),f[v+1]=.25*(h[n+1]+h[s+1]+h[a+1]+h[o+1]),f[v+2]=.25*(h[n+2]+h[s+2]+h[a+2]+h[o+2]),y[v]=.25*(l[n]+l[s]+l[a]+l[o]),y[v+1]=.25*(l[n+1]+l[s+1]+l[a+1]+l[o+1]),y[v+2]=.25*(l[n+2]+l[s+2]+l[a+2]+l[o+2]),p}}])&&Se(e.prototype,r),t}(),Re=function(t,e,r,i){var n=t.getNbVertices();r.set(t.getColors().subarray(0,3*n)),i.set(t.getMaterials().subarray(0,3*n));for(var s=t.getVertices(),a=t.getFaces(),o=t.getEdges(),u=t.getFaceEdges(),h=t.getVerticesOnEdge(),l=t.getVerticesRingVertStartCount(),c=t.getVerticesRingVert(),f=t.getVerticesRingFaceStartCount(),y=t.getVerticesRingFace(),p=t.hasOnlyTriangles(),v=0;v<n;++v){var d=3*v,g=0,m=0,_=0,k=0,b=0,x=0,M=0;if(h[v]||Ee.LINEAR){var w=f[2*v],A=w+f[2*v+1];for(x=w;x<A;++x){var T=4*y[x],S=a[T],E=a[T+1],C=a[T+2],R=a[T+3],I=R===be.TRI_INDEX;M=be.TRI_INDEX,S===v?1===o[u[T]]?M=E:1===o[u[I?T+2:T+3]]&&(M=I?C:R):E===v?1===o[u[T]]?M=S:1===o[u[T+1]]&&(M=C):C===v?1===o[u[T+1]]?M=E:1===o[u[T+2]]&&(M=I?S:R):R===v&&(1===o[u[T+2]]?M=C:1===o[u[T+3]]&&(M=S)),M!==be.TRI_INDEX&&(g+=s[M*=3],m+=s[M+1],_+=s[M+2],k++)}k<2?(e[d]=s[d],e[d+1]=s[d+1],e[d+2]=s[d+2]):(k=.25/k,b=.75,e[d]=s[d]*b+g*k,e[d+1]=s[d+1]*b+m*k,e[d+2]=s[d+2]*b+_*k)}else{var z=l[2*v],O=l[2*v+1],N=z+O;for(x=z;x<N;++x)g+=s[M=3*c[x]],m+=s[M+1],_+=s[M+2];if(p)6===O?(k=.0625,b=.625):3===O?(k=.1875,b=.4375):(k=.375/O,b=.625),e[d]=s[d]*b+g*k,e[d+1]=s[d+1]*b+m*k,e[d+2]=s[d+2]*b+_*k;else{var F=0,V=0,P=0,D=0,U=f[2*v],L=U+f[2*v+1],B=0;for(x=U;x<L;++x){var j=a[3+(M=4*y[x])];if(j!==be.TRI_INDEX){B++;var W,X=a[M],Y=a[M+1],q=a[M+2];F+=s[W=X===v?3*q:Y===v?3*j:q===v?3*X:3*Y],V+=s[W+1],P+=s[W+2]}}B!==L-U?0!==B?(k=.5*(b=1/(1+.5*O+.25*B)),D=.25*b,e[d]=s[d]*b+g*k+F*D,e[d+1]=s[d+1]*b+m*k+V*D,e[d+2]=s[d+2]*b+_*k+P*D):(6===O?(k=.0625,b=.625):3===O?(k=.1875,b=.4375):(k=.375/O,b=.625),e[d]=s[d]*b+g*k,e[d+1]=s[d+1]*b+m*k,e[d+2]=s[d+2]*b+_*k):(4===O?(b=.5625,k=.09375,D=.015625):b=1-((k=1.5/(O*O))+(D=.25/(O*O)))*O,e[d]=s[d]*b+g*k+F*D,e[d+1]=s[d+1]*b+m*k+V*D,e[d+2]=s[d+2]*b+_*k+P*D)}}}},Ie=function(t,e,r,i,n){for(var s=t.getFaces(),a=t.getFaceEdges(),o=new Ce(t,e,r,i),u=0,h=t.getNbFaces();u<h;++u){var l,c,f,y,p,v=4*u,d=s[v],g=s[v+1],m=s[v+2],_=s[v+3],k=_!==be.TRI_INDEX;k?(l=o.computeQuadEdgeVertex(d,g,m,_,a[v]),c=o.computeQuadEdgeVertex(g,m,_,d,a[v+1]),f=o.computeQuadEdgeVertex(m,_,d,g,a[v+2]),y=o.computeQuadEdgeVertex(_,d,g,m,a[v+3]),p=o.computeFaceVertex(d,g,m,_)):(l=o.computeTriangleEdgeVertex(d,g,m,a[v]),c=o.computeTriangleEdgeVertex(g,m,d,a[v+1]),f=o.computeTriangleEdgeVertex(m,d,g,a[v+2])),n&&(v*=4,k?(n[v+1]=n[v+4]=l,n[v+6]=n[v+9]=c,n[v+11]=n[v+14]=f,n[v+3]=n[v+12]=y,n[v+2]=n[v+7]=n[v+8]=n[v+13]=p,n[v]=d,n[v+5]=g,n[v+10]=m,n[v+15]=_):(n[v]=n[v+5]=n[v+8]=l,n[v+1]=n[v+10]=n[v+12]=c,n[v+2]=n[v+6]=n[v+14]=f,n[v+3]=n[v+7]=n[v+11]=n[v+15]=be.TRI_INDEX,n[v+4]=d,n[v+9]=g,n[v+13]=m))}return o._tagEdges};Ee.fullSubdivision=function(t,e){var r=t.getNbVertices()+t.getNbEdges()+t.getNbQuads();e.setVertices(new Float32Array(3*r)),e.setColors(new Float32Array(3*r)),e.setMaterials(new Float32Array(3*r)),e.setFaces(new Uint32Array(4*t.getNbFaces()*4)),Re(t,e.getVertices(),e.getColors(),e.getMaterials());var i=Ie(t,e.getVertices(),e.getColors(),e.getMaterials(),e.getFaces());t.hasUV()&&function(t,e,r){var i=e.getNbVertices(),n=new Uint32Array(2*i);n.set(t.getVerticesDuplicateStartCount());var s=t.getFaces(),a=t.getFacesTexCoord(),o=3*e.getNbFaces(),u=t.getTexCoords(),h=new Float32Array(be.getMemory(4*o*2),0,2*o),l=0,c=t.getNbVertices(),f=i-c;for(l=0;l<c;++l){var y=n[2*l];y>0&&(n[2*l]=y+f)}h.set(u),h.set(u.subarray(2*c),2*(c+f));var p=f+t.getNbTexCoords(),v=t.getFaceEdges(),d=new Uint32Array(r.length),g=new Uint32Array(r.length);for(c=s.length,l=0;l<c;++l){var m=v[l];if(m!==be.TRI_INDEX){var _=(l+1)%4==0?l-3:l+1,k=a[l],b=a[_];b===be.TRI_INDEX&&(b=a[l-2]);var x=r[m]-1,M=g[m],w=k>b?k:b,A=k<b?k:b;0!==M?M===w&&d[m]===A||(h[2*p]=.5*(u[2*k]+u[2*b]),h[2*p+1]=.5*(u[2*k+1]+u[2*b+1]),n[2*x]=p++,n[2*x+1]=1):(h[2*x]=.5*(u[2*k]+u[2*b]),h[2*x+1]=.5*(u[2*k+1]+u[2*b+1]),d[m]=A,g[m]=w)}}var T=new Float32Array(2*p);T.set(h.subarray(0,2*p)),e.setTexCoords(T),e.setVerticesDuplicateStartCount(n),function(t,e,r){for(var i=t.getFacesTexCoord(),n=e.getFaces(),s=new Uint32Array(n.length),a=t.getFaceEdges(),o=t.getNbVertices(),u=e.getNbVertices()-o,h=e.getVerticesDuplicateStartCount(),l=e.getTexCoords(),c=0,f=t.getNbFaces();c<f;++c){var y=4*c,p=i[y],v=i[y+1],d=i[y+2],g=i[y+3];p>=o&&(p+=u),v>=o&&(v+=u),d>=o&&(d+=u),g!==be.TRI_INDEX&&g>=o&&(g+=u);var m=a[y],_=r[m]-1;_<0?_=h[2*(-_-1)]:h[2*_]>0&&(r[m]=-_);var k=r[m=a[y+1]]-1;k<0?k=h[2*(-k-1)]:h[2*k]>0&&(r[m]=-k);var b=r[m=a[y+2]]-1;if(b<0?b=h[2*(-b-1)]:h[2*b]>0&&(r[m]=-b),y*=4,g!==be.TRI_INDEX){var x=r[m=a[4*c+3]]-1;x<0?x=h[2*(-x-1)]:h[2*x]>0&&(r[m]=-x),s[y+1]=s[y+4]=_,s[y+6]=s[y+9]=k,s[y+11]=s[y+14]=b,s[y+3]=s[y+12]=x,s[y+2]=s[y+7]=s[y+8]=s[y+13]=n[y+2],s[y]=p,s[y+5]=v,s[y+10]=d,s[y+15]=g;var M=2*n[y+2];l[M]=.25*(l[2*p]+l[2*v]+l[2*d]+l[2*g]),l[M+1]=.25*(l[2*p+1]+l[2*v+1]+l[2*d+1]+l[2*g+1])}else s[y]=s[y+5]=s[y+8]=_,s[y+1]=s[y+10]=s[y+12]=k,s[y+2]=s[y+6]=s[y+14]=b,s[y+3]=s[y+7]=s[y+11]=s[y+15]=be.TRI_INDEX,s[y+4]=p,s[y+9]=v,s[y+13]=d}e.setFacesTexCoord(s)}(t,e,r)}(t,e,i),e.allocateArrays()},Ee.partialSubdivision=function(t,e,r,i){Re(t,e,r,i),Ie(t,e,r,i)};const ze=Ee;function Oe(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const Ne=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._bufferAttribute=null,this._version=0}var e,r;return e=t,(r=[{key:"bind",value:function(){}},{key:"release",value:function(){this._bufferAttribute&&(this._bufferAttribute=null)}},{key:"update",value:function(t,e){t&&(this._bufferAttribute&&this._bufferAttribute.count===t.length/e?(this._bufferAttribute.set(t),this._bufferAttribute.needsUpdate=!0):(this._bufferAttribute=new Qt(t,e),this._bufferAttribute.setUsage(I)),this._version++)}},{key:"getBufferAttribute",value:function(){return this._bufferAttribute}}])&&Oe(e.prototype,r),t}();function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pe(t,e){return(Pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function De(t,e){return!e||"object"!==Fe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ue(t){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}const Le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pe(t,e)}(a,t);var e,r,i,n,s=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ue(i);if(n){var r=Ue(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return De(this,t)});function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=s.call(this)).setID(t.getID()),r.setMeshData(e?t.getMeshData():{_nbVertices:0,_nbFaces:0,_nbTexCoords:0,_verticesXYZ:null,_normalsXYZ:null,_colorsRGB:null,_materialsPBR:null,_vertOnEdge:null,_vertRingFace:null,_vrfStartCount:null,_vrvStartCount:null,_vertRingVert:null,_vertTagFlags:null,_vertSculptFlags:null,_vertStateFlags:null,_vertProxy:null,_facesABCD:null,_faceEdges:null,_faceNormalsXYZ:null,_facesToTriangles:null,_trianglesABC:null,_facesTagFlags:null,_edges:null,_drawArraysWireframe:null,_drawElementsWireframe:null,_texCoordsST:null,_duplicateStartCount:null,_UVfacesABCD:null,_UVtrianglesABC:null,_DAverticesXYZ:null,_DAnormalsXYZ:null,_DAcolorsRGB:null,_DAmaterialsPBR:null,_DAtexCoordsST:null,_octree:null,_faceBoxes:null,_faceCentersXYZ:null,_facePosInLeaf:null,_faceLeaf:[],_leavesToUpdate:[],_worldBound:[1/0,1/0,1/0,-1/0,-1/0,-1/0]}),r.setRenderData(t.getRenderData()),r.setTransformData(t.getTransformData()),r._detailsXYZ=null,r._detailsRGB=null,r._detailsPBR=null,r._vertMapping=null,r._evenMapping=!1,r}return e=a,(r=[{key:"optimize",value:function(){}},{key:"getEvenMapping",value:function(){return this._evenMapping}},{key:"getVerticesMapping",value:function(){return this._vertMapping}},{key:"setVerticesMapping",value:function(t){this._vertMapping=t}},{key:"setEvenMapping",value:function(t){this._evenMapping=t}},{key:"higherSynthesis",value:function(t){t.computePartialSubdivision(this.getVertices(),this.getColors(),this.getMaterials(),this.getNbVertices()),this.applyDetails()}},{key:"lowerAnalysis",value:function(t){this.copyDataFromHigherRes(t);var e=t.getNbVertices(),r=new Float32Array(3*e),i=new Float32Array(3*e),n=new Float32Array(3*e);this.computePartialSubdivision(r,i,n,e),t.computeDetails(r,i,n,e)}},{key:"copyDataFromHigherRes",value:function(t){var e=this.getVertices(),r=this.getColors(),i=this.getMaterials(),n=this.getNbVertices(),s=t.getVertices(),a=t.getColors(),o=t.getMaterials();if(!1===this.getEvenMapping())e.set(s.subarray(0,3*n)),r.set(a.subarray(0,3*n)),i.set(o.subarray(0,3*n));else for(var u=this.getVerticesMapping(),h=0;h<n;++h){var l=3*h,c=3*u[h];e[l]=s[c],e[l+1]=s[c+1],e[l+2]=s[c+2],r[l]=a[c],r[l+1]=a[c+1],r[l+2]=a[c+2],i[l]=o[c],i[l+1]=o[c+1],i[l+2]=o[c+2]}}},{key:"computePartialSubdivision",value:function(t,e,r,i){var n=this.getVerticesMapping();if(n){var s=new Float32Array(3*i),a=new Float32Array(3*i),o=new Float32Array(3*i);ze.partialSubdivision(this,s,a,o);var u=!0===this.getEvenMapping()?0:this.getNbVertices();u>0&&(t.set(s.subarray(0,3*u)),e.set(a.subarray(0,3*u)),r.set(o.subarray(0,3*u)));for(var h=u;h<i;++h){var l=3*h,c=3*n[h];t[c]=s[l],t[c+1]=s[l+1],t[c+2]=s[l+2],e[c]=a[l],e[c+1]=a[l+1],e[c+2]=a[l+2],r[c]=o[l],r[c+1]=o[l+1],r[c+2]=o[l+2]}}else ze.partialSubdivision(this,t,e,r)}},{key:"applyDetails",value:function(){var t=this.getVerticesRingVertStartCount(),e=this.getVerticesRingVert(),r=this.getVertices(),i=this.getNormals(),n=this.getColors(),s=this.getMaterials(),a=this.getNbVertices(),o=new Float32Array(be.getMemory(3*a*4),0,3*a);o.set(r.subarray(0,3*a));for(var u=this._detailsXYZ,h=this._detailsRGB,l=this._detailsPBR,c=Math.min,f=Math.max,y=0;y<a;++y){var p=3*y;n[p]=c(1,f(0,n[p]+h[p])),n[p+1]=c(1,f(0,n[p+1]+h[p+1])),n[p+2]=c(1,f(0,n[p+2]+h[p+2])),s[p]=c(1,f(0,s[p]+l[p])),s[p+1]=c(1,f(0,s[p+1]+l[p+1])),s[p+2]=c(1,f(0,s[p+2]+l[p+2]));var v=o[p],d=o[p+1],g=o[p+2],m=i[p],_=i[p+1],k=i[p+2],b=m*m+_*_+k*k;if(0!==b){m*=b=1/Math.sqrt(b),_*=b,k*=b;var x=3*e[t[2*y]],M=o[x]-v,w=o[x+1]-d,A=o[x+2]-g;if(0!=(b=(M-=m*(b=M*m+w*_+A*k))*M+(w-=_*b)*w+(A-=k*b)*A)){var T=_*(A*=b=1/Math.sqrt(b))-k*(w*=b),S=k*(M*=b)-m*A,E=m*w-_*M,C=u[p],R=u[p+1],I=u[p+2];r[p]=v+m*C+M*R+T*I,r[p+1]=d+_*C+w*R+S*I,r[p+2]=g+k*C+A*R+E*I}}}}},{key:"computeDetails",value:function(t,e,r,i){for(var n=this.getVerticesRingVertStartCount(),s=this.getVerticesRingVert(),a=this.getVertices(),o=this.getNormals(),u=this.getColors(),h=this.getMaterials(),l=this.getNbVertices(),c=this._detailsXYZ=new Float32Array(3*i),f=this._detailsRGB=new Float32Array(3*i),y=this._detailsPBR=new Float32Array(3*i),p=0;p<l;++p){var v=3*p;f[v]=u[v]-e[v],f[v+1]=u[v+1]-e[v+1],f[v+2]=u[v+2]-e[v+2],y[v]=h[v]-r[v],y[v+1]=h[v+1]-r[v+1],y[v+2]=h[v+2]-r[v+2];var d=o[v],g=o[v+1],m=o[v+2],_=d*d+g*g+m*m;if(0!==_){d*=_=1/Math.sqrt(_),g*=_,m*=_;var k=3*s[n[2*p]],b=t[k]-t[v],x=t[k+1]-t[v+1],M=t[k+2]-t[v+2];if(0!=(_=(b-=d*(_=b*d+x*g+M*m))*b+(x-=g*_)*x+(M-=m*_)*M)){var w=g*(M*=_=1/Math.sqrt(_))-m*(x*=_),A=m*(b*=_)-d*M,T=d*x-g*b,S=a[v]-t[v],E=a[v+1]-t[v+1],C=a[v+2]-t[v+2];c[v]=d*S+g*E+m*C,c[v+1]=b*S+x*E+M*C,c[v+2]=w*S+A*E+T*C}}}}}])&&Ve(e.prototype,r),a}(Ne);function Be(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const je=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._bufferAttribute=null,this._version=0}var e,r;return e=t,(r=[{key:"bind",value:function(){}},{key:"release",value:function(){this._bufferAttribute&&(this._bufferAttribute=null)}},{key:"update",value:function(t,e){t&&(this._bufferAttribute&&this._bufferAttribute.count===t.length/e?(this._bufferAttribute.set(t),this._bufferAttribute.needsUpdate=!0):(this._bufferAttribute=new Qt(t,e),this._bufferAttribute.setUsage(I)),this._version++)}},{key:"getBufferAttribute",value:function(){return this._bufferAttribute}}])&&Be(e.prototype,r),t}();var We={},Xe=function(t,e,r){var i=++be.TAG_FLAG,n=t.getVerticesTagFlags(),s=t.getVerticesRingVertStartCount(),a=t.getVerticesRingVert(),o=t.getVerticesOnEdge(),u=function(t,e,r){var i=0,n=t.getNbVertices();for(i=0;i<n;++i)if(0===e[i]&&1===r[i])return i;var s=t.getVerticesOnEdge();for(i=0;i<n&&(0!==e[i]||1===s[i]);++i);if(i===n)return-1;for(i=0;i<n;++i)if(0===e[i])return i;return-1}(t,r,e);if(u<0)return!1;r[u]=1;var h=new Uint32Array(be.getMemory(4*t.getNbVertices()),0,t.getNbVertices());h[0]=u;for(var l=1;l>0;){var c=h[--l],f=s[2*c],y=f+s[2*c+1],p=0,v=++i;for(p=f;p<y;++p){var d=a[p];if(n[d]=v,1===r[d])return be.TAG_FLAG=i,!1;r[d]=-1,n[d]=v}for(v=++i,p=f;p<y;++p){var g=a[p];if(0!==e[g]&&!o[g])return be.TAG_FLAG=i,!1;for(var m=s[2*g],_=m+s[2*g+1],k=m;k<_;++k){var b=a[k];if(b!==c&&!(n[b]>=v-1)&&(n[b]=v,0===r[b])){for(var x=s[2*b],M=x+s[2*b+1],w=0,A=x;A<M;++A)n[a[A]]===v-1&&w++;2===w?r[b]=-1:(r[b]=1,h[l++]=b)}}}}return be.TAG_FLAG=i,!0};We.computeReverse=function(t,e){var r=t.getNbFaces();if(r%4!=0)return!1;var i=new Int8Array(t.getNbVertices());if(!function(t,e){for(var r=t.getNbVertices(),i=function(t){for(var e=t.getNbVertices(),r=t.getFaces(),i=t.getVerticesOnEdge(),n=t.getVerticesRingVertStartCount(),s=t.getVerticesRingFace(),a=t.getVerticesRingFaceStartCount(),o=new Int8Array(e),u=0;u<e;++u){for(var h=2*u,l=n[h+1],c=a[h],f=a[h+1],y=i[u],p=0,v=c,d=c+f;v<d;++v)p+=r[4*s[v]+3]===be.TRI_INDEX?0:1;0===p?(!y&&6!==l||y&&4!==l)&&(o[u]=1):p===f?(!y&&4!==l||y&&3!==l)&&(o[u]=1):(y||5!==l)&&(o[u]=1)}return o}(t),n=!0;n;){if(!Xe(t,i,e))return!1;n=!1;for(var s=0;s<r;++s)if(0===e[s]){n=!0;break}}return!0}(t,i))return!1;var n=new Int32Array(r/4);return!!function(t,e,r,i){var n=t.getFaceEdges(),s=t.getFaces(),a=new Int32Array(t.getNbEdges()),o=0,u=t.getNbFaces(),h=0,l=new Uint32Array(t.getNbVertices()),c=new Uint32Array(u);for(o=0;o<u;++o)c[o]=be.TRI_INDEX;for(o=0;o<u;++o){var f=4*o,y=s[f],p=s[f+1],v=s[f+2],d=s[f+3],g=r[y],m=r[p],_=r[v];if(d!==be.TRI_INDEX){var k=0,b=0,x=0;1===g?(k=y,b=v,x=a[n[f+1]]-1,a[n[f+2]]=y+1):1===m?(k=p,b=d,x=a[n[f+2]]-1,a[n[f+3]]=p+1):1===_?(k=v,b=y,x=a[n[f+3]]-1,a[n[f]]=v+1):(k=d,b=p,x=a[n[f]]-1,a[n[f+1]]=d+1);var M=l[b]-1;if(M<0)i[h]=-b-1,c[4*h+3]=k,l[b]=++h;else{var w=4*M;x<0?c[w+2]>=be.TRI_INDEX-1?(c[w+2]=k,c[w]=be.TRI_INDEX-1):c[w]===be.TRI_INDEX?c[w+1]=k:(c[w+1]=c[w+2],c[w+2]=k):c[w+1]===x?c[w]=k:(c[w]=c[w+1],c[w+2]===x?c[w+1]=k:(c[w+1]=c[w+2],c[w+2]=k))}}else{if(g+m+_===-3){i[h++]=o;continue}1===g?a[n[f+1]]=y+1:1===m?a[n[f+2]]=p+1:1===_&&(a[n[f]]=v+1)}}for(u/=4,o=0;o<u;++o){var A=i[o],T=4*o;if(A<0){var S=be.TRI_INDEX-1;if(c[T]>=S||c[T+1]>=be.TRI_INDEX||c[T+2]>=be.TRI_INDEX)return!1}else{var E=4*A;c[T]=a[n[E]]-1,c[T+1]=a[n[E+1]]-1,c[T+2]=a[n[E+2]]-1}}return e.setFaces(c),!0}(t,e,i,n)&&(function(t,e,r){var i=0,n=new Uint32Array(t.getNbVertices());e.setVerticesMapping(n);var s=e.getFaces(),a=new Int32Array(t.getNbVertices()),o=0,u=4*e.getNbFaces();for(o=0;o<u;++o){var h=s[o];if(h!==be.TRI_INDEX){var l=a[h]-1;-1===l&&(l=i++,a[h]=l+1,n[l]=h),s[o]=l}}e.setVertices(new Float32Array(3*i));var c=t.getFaces(),f=t.getVerticesRingFace(),y=t.getVerticesRingFaceStartCount(),p=new Uint8Array(t.getNbVertices());for(u/=4,o=0;o<u;++o){var v,d,g,m,_,k,b,x,M,w,A=r[o];if(A>=0){var T=4*A;v=c[T+1],d=c[T+2],g=c[T],m=be.TRI_INDEX,_=be.TRI_INDEX}else{_=-A-1;for(var S=4*o,E=n[s[S]],C=n[s[S+1]],R=n[s[S+2]],I=n[s[S+3]],z=y[2*_],O=z+4,N=z;N<O;++N){var F=4*f[N],V=c[F],P=c[F+1],D=c[F+2],U=c[F+3];V===E?v=P:P===E?v=D:D===E?v=U:U===E&&(v=V),V===C?d=P:P===C?d=D:D===C?d=U:U===C&&(d=V),V===R?g=P:P===R?g=D:D===R?g=U:U===R&&(g=V),V===I?m=P:P===I?m=D:D===I?m=U:U===I&&(m=V)}}k=p[v],b=p[d],x=p[g],M=m!==be.TRI_INDEX?p[m]:-1,w=_!==be.TRI_INDEX?p[_]:-1,0===k&&(p[v]=1,n[i++]=v),0===b&&(p[d]=1,n[i++]=d),0===x&&(p[g]=1,n[i++]=g),0===M&&(p[m]=1,n[i++]=m),0===w&&(p[_]=1,n[i++]=_)}}(t,e,n),function(t,e){var r=t.getVertices(),i=t.getColors(),n=t.getMaterials(),s=e.getVertices(),a=new Float32Array(s.length),o=new Float32Array(s.length);e.setColors(a),e.setMaterials(o);var u=e.getVerticesMapping(),h=0,l=e.getNbVertices();for(h=0;h<l&&!(u[h]>=l);++h);if(h===l){var c=e.getFaces(),f=c.length;for(h=0;h<f;++h){var y=c[h];y!==be.TRI_INDEX&&(c[h]=u[y])}for(h=0;h<l;++h)u[h]=h;s.set(r.subarray(0,3*l)),a.set(i.subarray(0,3*l)),o.set(n.subarray(0,3*l))}else for(e.setEvenMapping(!0),h=0;h<l;++h){var p=3*h,v=3*u[h];s[p]=r[v],s[p+1]=r[v+1],s[p+2]=r[v+2],a[p]=i[v],a[p+1]=i[v+1],a[p+2]=i[v+2],o[p]=n[v],o[p+1]=n[v+1],o[p+2]=n[v+2]}}(t,e),t.hasUV()&&function(t,e,r){for(var i=t.getVerticesDuplicateStartCount(),n=e.getNbVertices(),s=new Uint32Array(2*n),a=e.getVerticesMapping(),o=t.getTexCoords(),u=new Float32Array(be.getMemory(4*t.getNbTexCoords()*2),0,2*t.getNbTexCoords()),h=new Uint32Array(n),l=n,c=0;c<n;++c){var f=a[c],y=i[2*f];if(u[2*c]=o[2*f],u[2*c+1]=o[2*f+1],0!==y){for(var p=h[c]=y-l,v=i[2*f+1],d=l,g=l+v;d<g;++d)u[2*d]=o[2*(p+d)],u[2*d+1]=o[2*(p+d)+1];s[2*c]=l,s[2*c+1]=v,l+=v}}e.setTexCoords(new Float32Array(u.subarray(0,2*l))),e.setVerticesDuplicateStartCount(s),function(t,e,r,i){for(var n=t.getFaces(),s=t.getFacesTexCoord(),a=t.getVerticesRingFaceStartCount(),o=t.getVerticesRingFace(),u=t.getVerticesDuplicateStartCount(),h=e.getFaces(),l=new Uint32Array(h),c=e.getVerticesMapping(),f=0,y=h.length;f<y;++f){var p=h[f];if(p!==be.TRI_INDEX){var v=c[p];if(0!==u[2*v]){var d=f%4,g=r[(f-d)/4],m=be.TRI_INDEX;if(g>=0){var _,k,b=4*g;0===d?(_=n[b+1],k=n[b]):1===d?(_=n[b+2],k=n[b+1]):(_=n[b],k=n[b+2]);for(var x=a[2*v],M=x+a[2*v+1],w=x;w<M;++w){var A=4*o[w],T=n[A],S=n[A+1],E=n[A+2];if(T===_?S===k&&(m=s[A+2]):S===_?E===k&&(m=s[A]):E===_&&T===k&&(m=s[A+1]),m!==be.TRI_INDEX)break}}else for(var C=a[2*(g=-g-1)],R=C+4,I=C;I<R;++I){var z=4*o[I];if(n[z]===v?m=s[z]:n[z+1]===v?m=s[z+1]:n[z+2]===v?m=s[z+2]:n[z+3]===v&&(m=s[z+3]),m!==be.TRI_INDEX)break}l[f]=m===v?m:m-i[p]}}}e.setFacesTexCoord(l)}(t,e,r,h)}(t,e,n),e.allocateArrays(),!0)};const Ye=We;function qe(t){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ge(t,e,r){return(Ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qe(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Je(t,e){return!e||"object"!==qe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tr(t,e,r){return(tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ir(t)););return t}(t,e);if(i){var n=Object.getOwnPropertyDescriptor(i,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rr(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(o,t);var e,r,i,n,s,a=(n=o,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qe(n);if(s){var r=Qe(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Je(this,t)});function o(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).setID(t.getID()),e.setRenderData(t.getRenderData()),e.setTransformData(t.getTransformData()),e._meshes=[new Le(t,!0)],e.setSelection(0);var r=t.getGL();return e._indexBuffer=new je(r,r.ELEMENT_ARRAY_BUFFER,r.STATIC_DRAW),e._wireframeBuffer=new je(r,r.ELEMENT_ARRAY_BUFFER,r.STATIC_DRAW),e}return e=o,i=[{key:"NONE",get:function(){return 0}},{key:"SCULPT",get:function(){return 1}},{key:"CAMERA",get:function(){return 2}},{key:"PICKING",get:function(){return 3}}],(r=[{key:"getCurrentMesh",value:function(){return this._meshes[this._sel]}},{key:"setSelection",value:function(t){this._sel=t,this.setMeshData(this.getCurrentMesh().getMeshData())}},{key:"addLevel",value:function(){if(this._meshes.length-1!==this._sel)return this.getCurrentMesh();var t=this.getCurrentMesh().getNbFaces(),e="addLevel : "+t+" -> "+4*t;console.time(e);var r=this.getCurrentMesh(),i=new Le(r);return r.setVerticesMapping(void 0),ze.fullSubdivision(r,i),i.initTopology(),this.pushMesh(i),this.initRender(),console.timeEnd(e),i}},{key:"computeReverse",value:function(){if(0!==this._sel)return this.getCurrentMesh();var t=this.getCurrentMesh(),e=new Le(t);return Ye.computeReverse(t,e)?(e.initTopology(),this.unshiftMesh(e),this.initRender(),e):void 0}},{key:"lowerLevel",value:function(){return 0===this._sel?this._meshes[0]:(this._meshes[this._sel-1].lowerAnalysis(this.getCurrentMesh()),this.setSelection(this._sel-1),this.updateResolution(),this.getCurrentMesh())}},{key:"higherLevel",value:function(){return this._sel===this._meshes.length-1||(this._meshes[this._sel+1].higherSynthesis(this.getCurrentMesh()),this.setSelection(this._sel+1),this.updateResolution()),this.getCurrentMesh()}},{key:"updateResolution",value:function(){this.updateGeometry(),this.updateDuplicateColorsAndMaterials(),this.updateBuffers();var t=this._meshes[this.getLowIndexRender()];this._indexBuffer.update(t.getTriangles()),this._wireframeBuffer.update(t.getWireframe())}},{key:"selectResolution",value:function(t){for(;this._sel>t;)this.lowerLevel();for(;this._sel<t;)this.higherLevel()}},{key:"findIndexFromMesh",value:function(t){for(var e=this._meshes,r=0,i=e.length;r<i;++r)if(t===e[r])return r}},{key:"selectMesh",value:function(t){var e=this.findIndexFromMesh(t);this.selectResolution(e)}},{key:"pushMesh",value:function(t){this._meshes.push(t),this.setSelection(this._meshes.length-1),this.updateResolution()}},{key:"unshiftMesh",value:function(t){this._meshes.unshift(t),this.setSelection(1),this.lowerLevel()}},{key:"popMesh",value:function(){this._meshes.pop(),this.setSelection(this._meshes.length-1),this.updateResolution()}},{key:"shiftMesh",value:function(){this._meshes.shift(),this.setSelection(0),this.updateResolution()}},{key:"deleteLower",value:function(){this._meshes.splice(0,this._sel),this.setSelection(0)}},{key:"deleteHigher",value:function(){this._meshes.splice(this._sel+1)}},{key:"getLowIndexRender",value:function(){for(var t=this._sel;t>=0;){var e=this._meshes[t];if(!0===e.getEvenMapping())return t===this._sel?t:t+1;if(e.getNbTriangles()<5e5)return t;--t}return 0}},{key:"_renderLow",value:function(t){var e=this.getRenderData(),r=this._sel,i=this.getIndexBuffer();this.setSelection(this.getLowIndexRender()),e._indexBuffer=this._indexBuffer,Ge(Qe(o.prototype),"render",this).call(this,t),e._indexBuffer=i,this.setSelection(r)}},{key:"_renderWireframeLow",value:function(t){var e=this.getRenderData(),r=this._sel,i=this.getWireframeBuffer();this.setSelection(this.getLowIndexRender()),e._wireframeBuffer=this._wireframeBuffer,Ge(Qe(o.prototype),"renderWireframe",this).call(this,t),e._wireframeBuffer=i,this.setSelection(r)}},{key:"_canUseLowRender",value:function(t){return!(this.isUsingTexCoords()||this.isUsingDrawArrays()||o.RENDER_HINT===o.PICKING||o.RENDER_HINT===o.NONE||t.getMesh()===this&&o.RENDER_HINT!==o.CAMERA||this.getLowIndexRender()===this._sel)}},{key:"render",value:function(t){return this._canUseLowRender(t)?this._renderLow(t):Ge(Qe(o.prototype),"render",this).call(this,t)}},{key:"renderWireframe",value:function(t){return this._canUseLowRender(t)?this._renderWireframeLow(t):Ge(Qe(o.prototype),"renderWireframe",this).call(this,t)}}])&&He(e.prototype,r),i&&He(e,i),o}(Ne)).RENDER_HINT=0;const nr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(u,t);var e,r,n,a,o=(n=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ir(n);if(a){var r=ir(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return rr(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this))._mouseX=0,t._mouseY=0,t._lastMouseX=0,t._lastMouseY=0,t._lastScale=0,t._action=we.Action.NOTHING,t._lastNbPointers=0,t._isWheelingIn=!1,t._maskX=0,t._maskY=0,t._eventProxy={},t}return e=u,(r=[{key:"start",value:function(){tr(ir(u.prototype),"start",this).call(this),this._hammer=new i.Manager(this._canvas),this.initHammer(),this.addEvents()}},{key:"onDeviceMove",value:function(t){if(!this._focusGui){this.setMousePosition(t);var e=this._mouseX,r=this._mouseY,i=this._action,n=this.getSpeedFactor();i===we.Action.CAMERA_ZOOM||i===we.Action.CAMERA_PAN_ZOOM_ALT&&!t.altKey?(this.getCamera().zoom((e-this._lastMouseX+r-this._lastMouseY)*n),this.render()):i===we.Action.CAMERA_PAN_ZOOM_ALT||i===we.Action.CAMERA_PAN?(this.getCamera().translate((e-this._lastMouseX)*n,(r-this._lastMouseY)*n),this.render()):i===we.Action.CAMERA_ROTATE?(t.shiftKey||this.getCamera().rotate(e,r),this.render()):(this._sculptManager.preUpdate(),i===we.Action.SCULPT_EDIT&&(this._sculptManager.update(this),this.getMesh().isDynamic&&this._gui.updateMeshInfo())),this._lastMouseX=e,this._lastMouseY=r,this.renderSelectOverRtt()}}},{key:"addEvents",value:function(){}},{key:"onPointer",value:function(t){s.pressure=t.pressure}},{key:"initHammer",value:function(){}},{key:"_initHammerRecognizers",value:function(){}},{key:"_initHammerEvents",value:function(){}},{key:"stopAndPrevent",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"onContextLost",value:function(){window.alert("Contexto WebGL perdido.")}},{key:"onContextRestored",value:function(){window.alert("Contexto restaurado.")}},{key:"onKeyDown",value:function(t){this._gui.callFunc("onKeyDown",t)}},{key:"onKeyUp",value:function(t){this._gui.callFunc("onKeyUp",t)}},{key:"onPanStart",value:function(t){}},{key:"onPanMove",value:function(t){}},{key:"_isIOS",value:function(){}},{key:"onPanUpdateNbPointers",value:function(t){}},{key:"onPanEnd",value:function(t){}},{key:"onDoubleTap",value:function(t){}},{key:"onDoubleTap2Fingers",value:function(){}},{key:"onPinchStart",value:function(t){}},{key:"onPinchInOut",value:function(t){}},{key:"resetCameraMeshes",value:function(t){}},{key:"getFileType",value:function(t){}},{key:"loadFiles",value:function(t){}},{key:"readFile",value:function(t,e){}},{key:"onMouseDown",value:function(t){}},{key:"onMouseMove",value:function(t){}},{key:"onMouseOver",value:function(t){}},{key:"onMouseOut",value:function(t){}},{key:"onMouseUp",value:function(t){}},{key:"onMouseWheel",value:function(t){}},{key:"onDeviceUp",value:function(){}},{key:"onDeviceWheel",value:function(t){}},{key:"_endWheel",value:function(){}},{key:"setMousePosition",value:function(t){this._mouseX=this._pixelRatio*(t.pageX-this._canvasOffsetLeft),this._mouseY=this._pixelRatio*(t.pageY-this._canvasOffsetTop)}},{key:"onDeviceDown",value:function(t){}},{key:"getSpeedFactor",value:function(){return this._cameraSpeed/(this._canvasHeight*this.getPixelRatio())}}])&&$e(e.prototype,r),u}(Te);window.SculptGL=nr},297:(t,e,r)=>{var i;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(s,a,o,u){"use strict";var h,l=["","webkit","Moz","MS","ms","o"],c=a.createElement("div"),f=Math.round,y=Math.abs,p=Date.now;function v(t,e,r){return setTimeout(x(t,r),e)}function d(t,e,r){return!!Array.isArray(t)&&(g(t,r[e],r),!0)}function g(t,e,r){var i;if(t)if(t.forEach)t.forEach(e,r);else if(t.length!==u)for(i=0;i<t.length;)e.call(r,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(r,t[i],i,t)}function m(t,e,r){var i="DEPRECATED METHOD: "+e+"\n"+r+" AT \n";return function(){var e=new Error("get-stack-trace"),r=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=s.console&&(s.console.warn||s.console.log);return n&&n.call(s.console,i,r),t.apply(this,arguments)}}h="function"!=typeof Object.assign?function(t){if(t===u||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(i!==u&&null!==i)for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e}:Object.assign;var _=m((function(t,e,r){for(var i=Object.keys(e),n=0;n<i.length;)(!r||r&&t[i[n]]===u)&&(t[i[n]]=e[i[n]]),n++;return t}),"extend","Use `assign`."),k=m((function(t,e){return _(t,e,!0)}),"merge","Use `assign`.");function b(t,e,r){var i,n=e.prototype;(i=t.prototype=Object.create(n)).constructor=t,i._super=n,r&&h(i,r)}function x(t,e){return function(){return t.apply(e,arguments)}}function M(t,e){return"function"==n(t)?t.apply(e&&e[0]||u,e):t}function w(t,e){return t===u?e:t}function A(t,e,r){g(C(e),(function(e){t.addEventListener(e,r,!1)}))}function T(t,e,r){g(C(e),(function(e){t.removeEventListener(e,r,!1)}))}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function E(t,e){return t.indexOf(e)>-1}function C(t){return t.trim().split(/\s+/g)}function R(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var i=0;i<t.length;){if(r&&t[i][r]==e||!r&&t[i]===e)return i;i++}return-1}function I(t){return Array.prototype.slice.call(t,0)}function z(t,e,r){for(var i=[],n=[],s=0;s<t.length;){var a=e?t[s][e]:t[s];R(n,a)<0&&i.push(t[s]),n[s]=a,s++}return r&&(i=e?i.sort((function(t,r){return t[e]>r[e]})):i.sort()),i}function O(t,e){for(var r,i,n=e[0].toUpperCase()+e.slice(1),s=0;s<l.length;){if((i=(r=l[s])?r+n:e)in t)return i;s++}return u}var N=1;function F(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||s}var V="ontouchstart"in s,P=O(s,"PointerEvent")!==u,D=V&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),U="touch",L="mouse",B=["x","y"],j=["clientX","clientY"];function W(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){M(t.options.enable,[t])&&r.handler(e)},this.init()}function X(t,e,r){var i=r.pointers.length,n=r.changedPointers.length,s=1&e&&i-n==0,a=12&e&&i-n==0;r.isFirst=!!s,r.isFinal=!!a,s&&(t.session={}),r.eventType=e,function(t,e){var r=t.session,i=e.pointers,n=i.length;r.firstInput||(r.firstInput=Y(e)),n>1&&!r.firstMultiple?r.firstMultiple=Y(e):1===n&&(r.firstMultiple=!1);var s=r.firstInput,a=r.firstMultiple,o=a?a.center:s.center,h=e.center=q(i);e.timeStamp=p(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=J(o,h),e.distance=Z(o,h),function(t,e){var r=e.center,i=t.offsetDelta||{},n=t.prevDelta||{},s=t.prevInput||{};1!==e.eventType&&4!==s.eventType||(n=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=n.x+(r.x-i.x),e.deltaY=n.y+(r.y-i.y)}(r,e),e.offsetDirection=G(e.deltaX,e.deltaY);var l,c,f=H(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=f.x,e.overallVelocityY=f.y,e.overallVelocity=y(f.x)>y(f.y)?f.x:f.y,e.scale=a?(l=a.pointers,Z((c=i)[0],c[1],j)/Z(l[0],l[1],j)):1,e.rotation=a?function(t,e){return J(e[1],e[0],j)+J(t[1],t[0],j)}(a.pointers,i):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,function(t,e){var r,i,n,s,a=t.lastInterval||e,o=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(o>25||a.velocity===u)){var h=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,c=H(o,h,l);i=c.x,n=c.y,r=y(c.x)>y(c.y)?c.x:c.y,s=G(h,l),t.lastInterval=e}else r=a.velocity,i=a.velocityX,n=a.velocityY,s=a.direction;e.velocity=r,e.velocityX=i,e.velocityY=n,e.direction=s}(r,e);var v=t.element;S(e.srcEvent.target,v)&&(v=e.srcEvent.target),e.target=v}(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Y(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:f(t.pointers[r].clientX),clientY:f(t.pointers[r].clientY)},r++;return{timeStamp:p(),pointers:e,center:q(e),deltaX:t.deltaX,deltaY:t.deltaY}}function q(t){var e=t.length;if(1===e)return{x:f(t[0].clientX),y:f(t[0].clientY)};for(var r=0,i=0,n=0;n<e;)r+=t[n].clientX,i+=t[n].clientY,n++;return{x:f(r/e),y:f(i/e)}}function H(t,e,r){return{x:e/t||0,y:r/t||0}}function G(t,e){return t===e?1:y(t)>=y(e)?t<0?2:4:e<0?8:16}function Z(t,e,r){r||(r=B);var i=e[r[0]]-t[r[0]],n=e[r[1]]-t[r[1]];return Math.sqrt(i*i+n*n)}function J(t,e,r){r||(r=B);var i=e[r[0]]-t[r[0]],n=e[r[1]]-t[r[1]];return 180*Math.atan2(n,i)/Math.PI}W.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(F(this.element),this.evWin,this.domHandler)}};var Q={mousedown:1,mousemove:2,mouseup:4},K="mousedown",$="mousemove mouseup";function tt(){this.evEl=K,this.evWin=$,this.pressed=!1,W.apply(this,arguments)}b(tt,W,{handler:function(t){var e=Q[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:L,srcEvent:t}))}});var et={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},rt={2:U,3:"pen",4:L,5:"kinect"},it="pointerdown",nt="pointermove pointerup pointercancel";function st(){this.evEl=it,this.evWin=nt,W.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}s.MSPointerEvent&&!s.PointerEvent&&(it="MSPointerDown",nt="MSPointerMove MSPointerUp MSPointerCancel"),b(st,W,{handler:function(t){var e=this.store,r=!1,i=t.type.toLowerCase().replace("ms",""),n=et[i],s=rt[t.pointerType]||t.pointerType,a=s==U,o=R(e,t.pointerId,"pointerId");1&n&&(0===t.button||a)?o<0&&(e.push(t),o=e.length-1):12&n&&(r=!0),o<0||(e[o]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),r&&e.splice(o,1))}});var at={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ot="touchstart",ut="touchstart touchmove touchend touchcancel";function ht(){this.evTarget=ot,this.evWin=ut,this.started=!1,W.apply(this,arguments)}function lt(t,e){var r=I(t.touches),i=I(t.changedTouches);return 12&e&&(r=z(r.concat(i),"identifier",!0)),[r,i]}b(ht,W,{handler:function(t){var e=at[t.type];if(1===e&&(this.started=!0),this.started){var r=lt.call(this,t,e);12&e&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:U,srcEvent:t})}}});var ct={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ft="touchstart touchmove touchend touchcancel";function yt(){this.evTarget=ft,this.targetIds={},W.apply(this,arguments)}function pt(t,e){var r=I(t.touches),i=this.targetIds;if(3&e&&1===r.length)return i[r[0].identifier]=!0,[r,r];var n,s,a=I(t.changedTouches),o=[],u=this.target;if(s=r.filter((function(t){return S(t.target,u)})),1===e)for(n=0;n<s.length;)i[s[n].identifier]=!0,n++;for(n=0;n<a.length;)i[a[n].identifier]&&o.push(a[n]),12&e&&delete i[a[n].identifier],n++;return o.length?[z(s.concat(o),"identifier",!0),o]:void 0}function vt(){W.apply(this,arguments);var t=x(this.handler,this);this.touch=new yt(this.manager,t),this.mouse=new tt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function dt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,gt.call(this,e)):12&t&&gt.call(this,e)}function gt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var r={x:e.clientX,y:e.clientY};this.lastTouches.push(r);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(r);t>-1&&i.splice(t,1)}),2500)}}function mt(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],s=Math.abs(e-n.x),a=Math.abs(r-n.y);if(s<=25&&a<=25)return!0}return!1}b(yt,W,{handler:function(t){var e=ct[t.type],r=pt.call(this,t,e);r&&this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:U,srcEvent:t})}}),b(vt,W,{handler:function(t,e,r){var i=r.pointerType==U,n=r.pointerType==L;if(!(n&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(i)dt.call(this,e,r);else if(n&&mt.call(this,r))return;this.callback(t,e,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var _t=O(c.style,"touchAction"),kt=_t!==u,bt="compute",xt="auto",Mt="manipulation",wt="none",At="pan-x",Tt="pan-y",St=function(){if(!kt)return!1;var t={},e=s.CSS&&s.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!e||s.CSS.supports("touch-action",r)})),t}();function Et(t,e){this.manager=t,this.set(e)}Et.prototype={set:function(t){t==bt&&(t=this.compute()),kt&&this.manager.element.style&&St[t]&&(this.manager.element.style[_t]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,(function(e){M(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(E(t,wt))return wt;var e=E(t,At),r=E(t,Tt);return e&&r?wt:e||r?e?At:Tt:E(t,Mt)?Mt:xt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,r=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,n=E(i,wt)&&!St.none,s=E(i,Tt)&&!St["pan-y"],a=E(i,At)&&!St["pan-x"];if(n){var o=1===t.pointers.length,u=t.distance<2,h=t.deltaTime<250;if(o&&u&&h)return}if(!a||!s)return n||s&&6&r||a&&24&r?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Ct=32;function Rt(t){this.options=h({},this.defaults,t||{}),this.id=N++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function It(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function zt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Ot(t,e){var r=e.manager;return r?r.get(t):t}function Nt(){Rt.apply(this,arguments)}function Ft(){Nt.apply(this,arguments),this.pX=null,this.pY=null}function Vt(){Nt.apply(this,arguments)}function Pt(){Rt.apply(this,arguments),this._timer=null,this._input=null}function Dt(){Nt.apply(this,arguments)}function Ut(){Nt.apply(this,arguments)}function Lt(){Rt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Bt(t,e){return(e=e||{}).recognizers=w(e.recognizers,Bt.defaults.preset),new jt(t,e)}function jt(t,e){this.options=h({},Bt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(P?st:D?yt:V?vt:tt))(this,X),this.touchAction=new Et(this,this.options.touchAction),Wt(this,!0),g(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Wt(t,e){var r,i=t.element;i.style&&(g(t.options.cssProps,(function(n,s){r=O(i.style,s),e?(t.oldCssProps[r]=i.style[r],i.style[r]=n):i.style[r]=t.oldCssProps[r]||""})),e||(t.oldCssProps={}))}Rt.prototype={defaults:{},set:function(t){return h(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Ot(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)||(t=Ot(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===R(e,t=Ot(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=Ot(t,this);var e=R(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,r=this.state;function i(r){e.manager.emit(r,t)}r<8&&i(e.options.event+It(r)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),r>=8&&i(e.options.event+It(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ct},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=h({},t);if(!M(this.options.enable,[this,e]))return this.reset(),void(this.state=Ct);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(Nt,Rt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,r=t.eventType,i=6&e,n=this.attrTest(t);return i&&(8&r||!n)?16|e:i||n?4&r?8|e:2&e?4|e:2:Ct}}),b(Ft,Nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Tt),24&t&&e.push(At),e},directionTest:function(t){var e=this.options,r=!0,i=t.distance,n=t.direction,s=t.deltaX,a=t.deltaY;return n&e.direction||(6&e.direction?(n=0===s?1:s<0?2:4,r=s!=this.pX,i=Math.abs(t.deltaX)):(n=0===a?1:a<0?8:16,r=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=n,r&&i>e.threshold&&n&e.direction},attrTest:function(t){return Nt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=zt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(Vt,Nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),b(Pt,Rt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[xt]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,i=t.distance<e.threshold,n=t.deltaTime>e.time;if(this._input=t,!i||!r||12&t.eventType&&!n)this.reset();else if(1&t.eventType)this.reset(),this._timer=v((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Ct},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),b(Dt,Nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[wt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(Ut,Nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ft.prototype.getTouchAction.call(this)},attrTest:function(t){var e,r=this.options.direction;return 30&r?e=t.overallVelocity:6&r?e=t.overallVelocityX:24&r&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&r&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&y(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=zt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Lt,Rt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Mt]},process:function(t){var e=this.options,r=t.pointers.length===e.pointers,i=t.distance<e.threshold,n=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&n&&r){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||Z(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=v((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ct},failTimeout:function(){return this._timer=v((function(){this.state=Ct}),this.options.interval,this),Ct},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Bt.VERSION="2.0.7",Bt.defaults={domEvents:!1,touchAction:bt,enable:!0,inputTarget:null,inputClass:null,preset:[[Dt,{enable:!1}],[Vt,{enable:!1},["rotate"]],[Ut,{direction:6}],[Ft,{direction:6},["swipe"]],[Lt],[Lt,{event:"doubletap",taps:2},["tap"]],[Pt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},jt.prototype={set:function(t){return h(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var r;this.touchAction.preventDefaults(t);var i=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(n=e.curRecognizer=null);for(var s=0;s<i.length;)r=i[s],2===e.stopped||n&&r!=n&&!r.canRecognizeWith(n)?r.reset():r.recognize(t),!n&&14&r.state&&(n=e.curRecognizer=r),s++}},get:function(t){if(t instanceof Rt)return t;for(var e=this.recognizers,r=0;r<e.length;r++)if(e[r].options.event==t)return e[r];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,r=R(e,t);-1!==r&&(e.splice(r,1),this.touchAction.update())}return this},on:function(t,e){if(t!==u&&e!==u){var r=this.handlers;return g(C(t),(function(t){r[t]=r[t]||[],r[t].push(e)})),this}},off:function(t,e){if(t!==u){var r=this.handlers;return g(C(t),(function(t){e?r[t]&&r[t].splice(R(r[t],e),1):delete r[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var r=a.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](e),i++}},destroy:function(){this.element&&Wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(Bt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ct,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:jt,Input:W,TouchAction:Et,TouchInput:yt,MouseInput:tt,PointerEventInput:st,TouchMouseInput:vt,SingleTouchInput:ht,Recognizer:Rt,AttrRecognizer:Nt,Tap:Lt,Pan:Ft,Swipe:Ut,Pinch:Vt,Rotate:Dt,Press:Pt,on:A,off:T,each:g,merge:k,extend:_,assign:h,inherit:b,bindFn:x,prefixed:O}),(void 0!==s?s:"undefined"!=typeof self?self:{}).Hammer=Bt,(i=function(){return Bt}.call(e,r,e,t))===u||(t.exports=i)}(window,document)},50:()=>{if(window.Map||(window.Map=function(){this.map={}},window.Map.prototype={set:function(t,e){this.map[t]=e},get:function(t){return this.map[t]}}),!Float32Array.prototype.slice){var t=function(t,e){return new this.constructor(this.subarray(t,e))};Int8Array.prototype.slice=t,Uint8Array.prototype.slice=t,Uint8ClampedArray.prototype.slice=t,Int16Array.prototype.slice=t,Uint16Array.prototype.slice=t,Int32Array.prototype.slice=t,Uint32Array.prototype.slice=t,Float32Array.prototype.slice=t,Float64Array.prototype.slice=t}String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.slice(-t.length)===t}),String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.slice(0,t.length)===t});for(var e=["moz","webkit"],r=0;r<e.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[e[r]+"RequestAnimationFrame"];window.requestAnimationFrame||window.alert("browser is too old. Probably no webgl there anyway")}},e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={exports:{}};return t[i](n,n.exports,r),n.exports}return r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(750)})()}));